<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.7.5 plugin-docs plugin-id-default docs-doc-id-ambari-design/kerberos/kerberos_descriptor">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">The Kerberos Descriptor | Apache Ambari</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.7.5"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.7.5"><meta data-rh="true" name="docsearch:version" content="2.7.5"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.7.5"><meta data-rh="true" property="og:title" content="The Kerberos Descriptor | Apache Ambari"><meta data-rh="true" name="description" content="&lt;!---"><meta data-rh="true" property="og:description" content="&lt;!---"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.71b625a1.css">
<link rel="preload" href="/assets/js/runtime~main.b0b3e18c.js" as="script">
<link rel="preload" href="/assets/js/main.f3d6882e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ambari-logo.png" alt="Apache Ambari Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ambari-logo.png" alt="Apache Ambari Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Apache Ambari</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/2.7.5/introduction">Docs</a><a href="https://cwiki.apache.org/confluence/display/AMBARI/Ambari" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Releases</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/dyn/closer.cgi/ambari/ambari-2.7.6" target="_blank" rel="noopener noreferrer" class="dropdown__link">2.7.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/dyn/closer.cgi/ambari/ambari-2.7.5" target="_blank" rel="noopener noreferrer" class="dropdown__link">2.7.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Project Information</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_blank" href="/team">Project Team</a></li><li><a href="https://issues.apache.org/jira/projects/AMBARI/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">JIRA<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.meetup.com/Apache-Ambari-User-Group/" target="_blank" rel="noopener noreferrer" class="dropdown__link">User Group<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Project License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.7.5/introduction">2.7.5</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/ambari-design/kerberos/kerberos_descriptor">Next</a></li><li><a class="dropdown__link" href="/docs/ambari-design/kerberos/kerberos_descriptor">2.7.6</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor">2.7.5</a></li></ul></div><a href="https://github.com/apache/ambari" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.5/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/2.7.5/quick-start/quick-start-guide">Quick Start</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/quick-start/quick-start-guide">Quick Start Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/quick-start/quick-start-for-new-vm-users">Quick Start for New VM Users</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/2.7.5/ambari-design/">Ambari Design</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ambari Design&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/alerts">Alerts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/2.7.5/kerberos">Automated Kerberizaton</a><button aria-label="Toggle the collapsible sidebar category &#x27;Automated Kerberizaton&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.7.5/ambari-design/kerberos/kerberos_descriptor">The Kerberos Descriptor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/kerberos/kerberos_service">The Kerberos Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/kerberos/enabling_kerberos">Enabling Kerberos</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/2.7.5/blueprints">Blueprints</a><button aria-label="Toggle the collapsible sidebar category &#x27;Blueprints&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/enhanced-configs/">Enhanced Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/service-dashboard/">Enhanced Service Dashboard</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/2.7.5/ambari-design/metrics/">Metrics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Metrics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/quick-links">Quick Links</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/2.7.5/ambari-design/stack-and-services/">Stacks and Services</a><button aria-label="Toggle the collapsible sidebar category &#x27;Stacks and Services&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.5/ambari-design/technology-stack">Technology Stack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/2.7.5/ambari-design/views/">Views</a><button aria-label="Toggle the collapsible sidebar category &#x27;Views&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/2.7.5/ambari-dev/">Ambari Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ambari Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/2.7.5/ambari-plugin-contribution/">Ambari Plugin Contributions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ambari Plugin Contributions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.5/ambari-alerts">Ambari Alerts</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Ambari<!-- --> <b>2.7.5</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/ambari-design/kerberos/kerberos_descriptor">latest version</a></b> (<!-- -->2.7.6<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/2.7.5/ambari-design/"><span itemprop="name">Ambari Design</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/2.7.5/kerberos"><span itemprop="name">Automated Kerberizaton</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">The Kerberos Descriptor</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.7.5</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The Kerberos Descriptor</h1></header><ul><li><a href="/docs/2.7.5/kerberos">Introduction</a></li><li><a href="#the-kerberos-descriptor">The Kerberos Descriptor</a><ul><li><a href="#components-of-a-kerberos-descriptor">Components of a Kerberos Descriptor</a><ul><li><a href="#stack-level-properties">Stack-level Properties</a></li><li><a href="#stack-level-identities">Stack-level Identities</a></li><li><a href="#stack-level-auth-to-local-properties">Stack-level Auth-to-local-properties</a></li><li><a href="#stack-level-configuratons">Stack-level Configurations</a></li><li><a href="#services">Services</a></li><li><a href="#service-level-identities">Service-level Identities</a></li><li><a href="#service-level-auth-to-local-properties">Service-level Auth-to-local-properties</a></li><li><a href="#service-level-configurations">Service-level Configurations</a></li><li><a href="#service-components">Components</a></li><li><a href="#component-level-identities">Component-level Identities</a></li><li><a href="#component-level-auth-to-local-properties">Component-level Auth-to-local-properties</a></li><li><a href="#component-level-configurations">Component-level Configurations</a></li></ul></li><li><a href="#kerberos-descriptor-specifications">Kerberos Descriptor specifications</a><ul><li><a href="#properties">properties</a></li><li><a href="#auth-to-local-properties">auth-to-local-properties</a></li><li><a href="#configurations">configurations</a></li><li><a href="#identities">identities</a></li><li><a href="#principal">principal</a></li><li><a href="#keytab">keytab</a></li><li><a href="#services">services</a></li><li><a href="#components">components</a></li></ul></li><li><a href="#examples">Examples</a></li></ul></li><li><a href="/docs/2.7.5/ambari-design/kerberos/kerberos_service">The Kerberos Service</a></li><li><a href="/docs/2.7.5/ambari-design/kerberos/enabling_kerberos">Enabling Kerberos</a></li></ul><a name="the-kerberos-descriptor"></a><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-kerberos-descriptor">The Kerberos Descriptor<a class="hash-link" href="#the-kerberos-descriptor" title="Direct link to heading">​</a></h2><p>The Kerberos Descriptor is a JSON-formatted text file containing information needed by Ambari to enable
or disable Kerberos for a stack and its services. This file must be named <strong><em>kerberos.json</em></strong> and should
be in the root directory of the relevant stack or service definition. Kerberos Descriptors are meant to
be hierarchical such that details in the stack-level descriptor can be overwritten (or updated) by details
in the service-level descriptors.</p><p>For the services in a stack to be Kerberized, there must be a stack-level Kerberos Descriptor. This
ensures that even if a common service has a Kerberos Descriptor, it may not be Kerberized unless the
relevant stack indicates that supports Kerberos by having a stack-level Kerberos Descriptor.</p><p>For a component of a service to be Kerberized, there must be an entry for it in its containing service&#x27;s
service-level descriptor. This allows for some of a services&#x27; components to be managed and other
components of that service to be ignored by the automated Kerberos facility.</p><p>Kerberos Descriptors are inherited from the base stack or service, but may be overridden as a full
descriptor - partial descriptors are not allowed.</p><p>A complete descriptor (which is built using the stack-level descriptor, the service-level descriptors,
and any updates from user input) has the following structure:</p><ul><li>Stack-level Properties</li><li>Stack-level Identities</li><li>Stack-level Configurations</li><li>Stack-level Auth-to-local-properties</li><li>Services<ul><li>Service-level Identities</li><li>Service-level Auth-to-local-properties</li><li>Service-level Configurations</li><li>Components<ul><li>Component-level Identities</li><li>Component-level Auth-to-local-properties</li><li>Component-level Configurations</li></ul></li></ul></li></ul><p>Each level of the descriptor inherits the data from its parent. This data, however, may be overridden
if necessary. For example, a component will inherit the configurations and identities of its container
service; which in turn inherits the configurations and identities from the stack.</p><a name="components-of-a-kerberos-descriptor"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="components-of-a-kerberos-descriptor">Components of a Kerberos Descriptor<a class="hash-link" href="#components-of-a-kerberos-descriptor" title="Direct link to heading">​</a></h3><a name="stack-level-properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stack-level-properties">Stack-level Properties<a class="hash-link" href="#stack-level-properties" title="Direct link to heading">​</a></h4><p>Stack-level properties is an optional set of name/value pairs that can be used in variable replacements.
For example, if a property named &quot;<strong><em>property1</em></strong>&quot; exists with the value of &quot;<strong><em>value1</em></strong>&quot;, then any instance of
&quot;<strong><em>${property1}</em></strong>&quot; within a configuration property name or configuration property value will be replaced
with &quot;<strong><em>value1</em></strong>&quot;.</p><p>This property is only relevant in the stack-level Kerberos Descriptor and may not be overridden by
lower-level descriptors.</p><p>See <a href="#properties">properties</a>.</p><a name="stack-level-identities"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stack-level-identities">Stack-level Identities<a class="hash-link" href="#stack-level-identities" title="Direct link to heading">​</a></h4><p>Stack-level identities is an optional identities block containing a list of zero or more identity
descriptors that are common among all services in the stack. An example of such an identity is the
Ambari smoke test user, which is used by all services to perform service check operations. Service-
and component-level identities may reference (and specialize) stack-level identities using the
identity’s name with a forward slash (/) preceding it. For example if there was a stack-level identity
with the name &quot;smokeuser&quot;, then a service or a component may create an identity block that references
and specializes it by declaring a &quot;<strong><em>reference</em></strong>&quot; property and setting it to &quot;/smokeuser&quot;.  Within
this identity block details of the identity may be and overwritten as necessary. This does not alter
the stack-level identity, it essentially creates a copy of it and updates the copy&#x27;s properties.</p><p>See <a href="#identities">identities</a>.</p><a name="stack-level-auth-to-local-properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stack-level-auth-to-local-properties">Stack-level Auth-to-local-properties<a class="hash-link" href="#stack-level-auth-to-local-properties" title="Direct link to heading">​</a></h4><p>Stack-level auth-to-local-properties is an optional list of zero or more configuration property
specifications <code>(config-type/property_name[|concatenation_scheme])</code> indicating which properties should
be updated with dynamically generated auto-to-local rule sets.</p><p>See <a href="#auth-to-local-properties">auth-to-local-properties</a>.</p><a name="stack-level-configurations"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stack-level-configurations">Stack-level Configurations<a class="hash-link" href="#stack-level-configurations" title="Direct link to heading">​</a></h4><p>Stack-level configurations is an optional configurations block containing a list of zero or more
configuration descriptors that are common among all services in the stack. Configuration descriptors
are overridable due to the structure of the data.  However, overriding configuration properties may
create undesired behavior since it is not known until after the Kerberization process is complete
what value a property will have.</p><p>See <a href="#configurations">configurations</a>.</p><a name="services"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="services">Services<a class="hash-link" href="#services" title="Direct link to heading">​</a></h4><p>Services is a list of zero or more service descriptors. A stack-level Kerberos Descriptor should not
list any services; however a service-level Kerberos Descriptor should contain at least one.</p><p>See <a href="#services">services</a>.</p><a name="service-level-identities"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-level-identities">Service-level Identities<a class="hash-link" href="#service-level-identities" title="Direct link to heading">​</a></h4><p>Service-level identities is an optional identities block containing a list of zero or more identity
descriptors that are common among all components of the service. Component-level identities may
reference (and specialize) service-level identities by specifying a relative or an absolute path
to it.</p><p>For example if there was a service-level identity with the name &quot;service_identity&quot;, then a child
component may create an identity block that references and specializes it by setting its &quot;reference&quot;
attribute to &quot;../service_identity&quot; or &quot;/service_name/service_identity&quot; and overriding any values as
necessary. This does not override the service-level identity, it essentially creates a copy of it and
updates the copy&#x27;s properties.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot; : &quot;relative_path_example&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;reference&quot; : &quot;../service_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot; : &quot;absolute_path_example&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;reference&quot; : &quot;/SERVICE/service_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong>: By using the absolute path to an identity, any service-level identity may be referenced by
any other service or component.</p><p>See <a href="#identities">identities</a>.</p><a name="service-level-auth-to-local-properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-level-auth-to-local-properties">Service-level Auth-to-local-properties<a class="hash-link" href="#service-level-auth-to-local-properties" title="Direct link to heading">​</a></h4><p>Service-level auth-to-local-properties is an optional list of zero or more configuration property
specifications <code>(config-type/property_name[|concatenation_scheme])</code> indicating which properties should
be updated with dynamically generated auto-to-local rule sets.</p><p>See <a href="#auth-to-local-properties">auth-to-local-properties</a>.</p><a name="service-level-configurations"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-level-configurations">Service-level Configurations<a class="hash-link" href="#service-level-configurations" title="Direct link to heading">​</a></h4><p>Service-level configurations is an optional configurations block listing of zero or more configuration
descriptors that are common among all components within a service. Configuration descriptors may be
overridden due to the structure of the data. However, overriding configuration properties may create
undesired behavior since it is not known until after the Kerberization process is complete what value
a property will have.</p><p>See <a href="#configurations">configurations</a>.</p><a name="service-components"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a class="hash-link" href="#components" title="Direct link to heading">​</a></h4><p>Components is a list of zero or more component descriptor blocks.</p><p>See <a href="#components">components</a>.</p><a name="component-level-identities"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="component-level-identities">Component-level Identities<a class="hash-link" href="#component-level-identities" title="Direct link to heading">​</a></h4><p>Component-level identities is an optional identities block containing a list of zero or more identity
descriptors that are specific to the component. A Component-level identity may be referenced
(and specialized) by using the absolute path to it (<code>/service_name/component_name/identity_name</code>).
This does not override the component-level identity, it essentially creates a copy of it and updates
the copy&#x27;s properties.</p><p>See <a href="#identities">identities</a>.</p><a name="component-level-auth-to-local-properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="component-level-auth-to-local-properties">Component-level Auth-to-local-properties<a class="hash-link" href="#component-level-auth-to-local-properties" title="Direct link to heading">​</a></h4><p>Component-level auth-to-local-properties is an optional list of zero or more configuration property
specifications <code>(config-type/property_name[|concatenation_scheme])</code> indicating which properties should
be updated with dynamically generated auto-to-local rule sets.</p><p>See <a href="#auth-to-local-properties">auth-to-local-properties</a>.</p><a name="component-level-configurations"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="component-level-configurations">Component-level Configurations<a class="hash-link" href="#component-level-configurations" title="Direct link to heading">​</a></h4><p>Component-level configurations is an optional configurations block listing zero or more configuration
descriptors that are specific to the component.</p><p>See <a href="#configurations">configurations</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="descriptor-specifications">Descriptor Specifications<a class="hash-link" href="#descriptor-specifications" title="Direct link to heading">​</a></h3><a name="properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="properties">properties<a class="hash-link" href="#properties" title="Direct link to heading">​</a></h4><p>The <code>properties</code> block is only valid in the service-level Kerberos Descriptor file. This block is
a set of name/value pairs as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;properties&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;property_1&quot; : &quot;value_1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;property_2&quot; : &quot;value_2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="auth-to-local-properties"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="auth-to-local-properties">auth-to-local-properties<a class="hash-link" href="#auth-to-local-properties" title="Direct link to heading">​</a></h4><p>The <code>auth-to-local-properties</code> block is valid in the stack-, service-, and component-level
descriptors. This block is a list of configuration specifications
(<code>config-type/property_name[|concatenation_scheme]</code>) indicating which properties contain
auth-to-local rules that should be dynamically updated based on the identities used within the
Kerberized cluster.</p><p>The specification optionally declares the concatenation scheme to use to append
the rules into a rule set value. If specified one of the following schemes may be set:</p><ul><li><strong><code>new_lines</code></strong> - rules in the rule set are separated by a new line (<code>\n</code>)</li><li><strong><code>new_lines_escaped</code></strong> - rules in the rule set are separated by a <code>\</code> and a new line (<code>\n</code>)</li><li><strong><code>spaces</code></strong> - rules in the rule set are separated by a whitespace character (effectively placing all rules in a single line)</li></ul><p>If not specified, the default concatenation scheme is <code>new_lines</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;auth-to-local-properties&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;core-site/hadoop.security.auth_to_local&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;service.properties/http.authentication.kerberos.name.rules|new_lines_escaped&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="configurations"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configurations">configurations<a class="hash-link" href="#configurations" title="Direct link to heading">​</a></h4><p>A <code>configurations</code> block may exist in stack-, service-, and component-level descriptors.
This block is a list of one or more configuration blocks containing a single structure named using
the configuration type and containing values for each relevant property.</p><p>Each property name and value may be a concrete value or contain variables to be replaced using values
from the stack-level <code>properties</code> block or any available configuration. Properties from the <code>properties</code>
block are referenced by name (<code>${property_name}</code>), configuration properties are reference by
configuration specification (<code>${config-type/property_name}</code>) and kerberos principals are referenced by the principal path
(<code>principals/SERVICE/COMPONENT/principal_name</code>).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;configurations&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;config-type-1&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;${cluster-env/smokeuser}_property&quot; : &quot;value1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;some_realm_property&quot; : &quot;${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;config-type-2&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;property-2&quot; : &quot;${cluster-env/smokeuser}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>cluster-env/smokuser</code> was <code>&quot;ambari-qa&quot;</code> and realm was <code>&quot;EXAMPLE.COM&quot;</code>, the above block would
effectively be translated to</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;configurations&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;config-type-1&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ambari-qa_property&quot; : &quot;value1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;some_realm_property&quot; : &quot;EXAMPLE.COM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;config-type-2&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;property-2&quot; : &quot;ambari-qa&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="identities"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="identities">identities<a class="hash-link" href="#identities" title="Direct link to heading">​</a></h4><p>An <code>identities</code> descriptor may exist in stack-, service-, and component-level descriptors. This block
is a list of zero or more identity descriptors. Each identity descriptor is a block containing a <code>name</code>,
an optional <code>reference</code> identifier, an optional <code>principal</code> descriptor, and an optional <code>keytab</code>
descriptor.</p><p>The <code>name</code> property of an <code>identity</code> descriptor should be a concrete name that is unique with in its
<code>local</code> scope (stack, service, or component). However, to maintain backwards-compatibility with
previous versions of Ambari, it may be a reference identifier to some other identity in the
Kerberos Descriptor. This feature is deprecated and may not be available in future versions of Ambari.</p><p>The <code>reference</code> property of an <code>identitiy</code> descriptor is optional. If it exists, it indicates that the
properties from referenced identity is to be used as the base for the current identity and any properties
specified in the local identity block overrides the base data. In this scenario, the base data is copied
to the local identities and therefore changes are realized locally, not globally. Referenced identities
may be hierarchical, so a referenced identity may reference another identity, and so on.  Because of
this, care must be taken not to create cyclic references. Reference values must be in the form of a
relative or absolute <em>path</em> to the referenced identity descriptor. Relative <em>paths</em> start with a <code>../</code>
and may be specified in component-level identity descriptors to reference an identity descriptor
in the parent service. Absolute <em>paths</em> start with a <code>/</code> and may be specified at any level as follows:</p><ul><li><strong>Stack-level</strong> identity reference: <code>/identitiy_name</code></li><li><strong>Service-level</strong> identity reference: <code>/SERVICE_NAME/identitiy_name</code></li><li><strong>Component-level</strong> identity reference: <code>/SERVICE_NAME/COMPONENT_NAME/identitiy_name</code></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;identities&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot; : &quot;local_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;principal&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keytab&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot; : &quot;/smokeuser&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;principal&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;configuration&quot; : &quot;service-site/principal_property_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keytab&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;configuration&quot; : &quot;service-site/keytab_property_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="principal"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="principal">principal<a class="hash-link" href="#principal" title="Direct link to heading">​</a></h4><p>The <code>principal</code> block is an optional block inside an <code>identity</code> descriptor block. It declares the
details about the identity’s principal, including the principal’s <code>value</code>, the <code>type</code> (user or service),
the relevant <code>configuration</code> property, and a local username mapping. All properties are optional; however
if no base or default value is available (via the parent identity&#x27;s <code>reference</code> value) for all properties,
the principal may be ignored.</p><p>The <code>value</code> property of the principal is expected to be the normalized principal name, including the
principal’s components and realm. In most cases, the realm should be specified using the realm variable
(<code>${realm}</code> or <code>${kerberos-env/realm}</code>). Also, in the case of a service principal, &quot;<code>_HOST</code>&quot; should be
used to represent the relevant hostname.  This value is typically replaced on the agent side by either
the agent-side scripts or the services themselves to be the hostname of the current host. However the
built-in hostname variable (<code>${hostname}</code>) may be used if &quot;<code>_HOST</code>&quot; replacement on the agent-side is
not available for the service. Examples: <code>smokeuser@${realm}</code>, <code>service/_HOST@${realm}</code>.</p><p>The <code>type</code> property of the principal may be either <code>user</code> or <code>service</code>. If not specified, the type is
assumed to be <code>user</code>. This value dictates how the identity is to be created in the KDC or Active Directory.
It is especially important in the Active Directory case due to how accounts are created. It also,
indicates to Ambari how to handle the principal and relevant keytab file reguarding the user interface
behavior and data caching.</p><p>The <code>configuration</code> property is an optional configuration specification (<code>config-type/property_name</code>)
that is to be set to this principal&#x27;s <code>value</code> (after its variables have been replaced).</p><p>The <code>local_username</code> property, if supplied, indicates which local user account to use when generating
auth-to-local rules for this identity. If not specified, no explicit auth-to-local rule will be generated.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;principal&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: &quot;${cluster-env/smokeuser}@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot; : &quot;user&quot; ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;configuration&quot;: &quot;cluster-env/smokeuser_principal_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;local_username&quot; : &quot;${cluster-env/smokeuser}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;principal&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: &quot;component1/_HOST@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot; : &quot;service&quot; ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;configuration&quot;: &quot;service-site/component1.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="keytab"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="keytab">keytab<a class="hash-link" href="#keytab" title="Direct link to heading">​</a></h4><p>The <code>keytab</code> block is an optional block inside an <code>identity</code> descriptor block. It describes how to
create and store the relevant keytab file.  This block declares the keytab file&#x27;s path in the local
filesystem of the destination host, the permissions to assign to that file, and the relevant
configuration property.</p><p>The <code>file</code> property declares an absolute path to use to store the keytab file when distributing to
relevant hosts. If this is not supplied, the keytab file will not be created.</p><p>The <code>owner</code> property is an optional block indicating the local user account to assign as the owner of
the file and what access  (<code>&quot;rw&quot;</code> - read/write; <code>&quot;r&quot;</code> - read-only) should
be granted to that user. By default, the owner will be given read-only access.</p><p>The <code>group</code> property is an optional block indicating which local group to assigned as the group owner
of the file and what access (<code>&quot;rw&quot;</code> - read/write; <code>&quot;r&quot;</code> - read-only; <code>“”</code> - no access) should be granted
to local user accounts in that group. By default, the group will be given no access.</p><p>The <code>configuration</code> property is an optional configuration specification (<code>config-type/property_name</code>)
that is to be set to the path of this keytabs file (after any variables have been replaced).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;keytab&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;file&quot;: &quot;${keytab_dir}/smokeuser.headless.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;${cluster-env/smokeuser}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;configuration&quot;: &quot;${cluster-env/smokeuser_keytab}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="services"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="services-1">services<a class="hash-link" href="#services-1" title="Direct link to heading">​</a></h4><p>A <code>services</code> block may exist in the stack-level and the service-level Kerberos Descriptor file.
This block is a list of zero or more service descriptors to add to the Kerberos Descriptor.</p><p>Each service block contains a service <code>name</code>, and optionals <code>identities</code>,  <code>auth_to_local_properties</code>
<code>configurations</code>, and <code>components</code> blocks.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;services&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;SERVICE1_NAME&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auth_to_local_properties&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;configurations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;components&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;SERVICE2_NAME&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auth_to_local_properties&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;configurations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;components&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="components"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="components-1">components<a class="hash-link" href="#components-1" title="Direct link to heading">​</a></h4><p>A <code>components</code> block may exist within a <code>service</code> descriptor block. This block is a list of zero or
more component descriptors belonging to the containing service descriptor. Each component descriptor
is a block containing a component <code>name</code>, and optional <code>identities</code>, <code>auth_to_local_properties</code>,
and <code>configurations</code> blocks.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;components&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;COMPONENT_NAME&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auth_to_local_properties&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;configurations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="examples"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a class="hash-link" href="#examples-1" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-stack-level-kerberos-descriptor">Example Stack-level Kerberos Descriptor<a class="hash-link" href="#example-stack-level-kerberos-descriptor" title="Direct link to heading">​</a></h4><p>The following example is annotated for descriptive purposes. The annotations are not valid in a real
JSON-formatted file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Properties that can be used in variable replacement operations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // For example, ${keytab_dir} will resolve to &quot;/etc/security/keytabs&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Since variable replacement is recursive, ${realm} will resolve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // to ${kerberos-env/realm}, which in-turn will resolve to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // declared default realm for the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;realm&quot;: &quot;${kerberos-env/realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keytab_dir&quot;: &quot;/etc/security/keytabs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // A list of global Kerberos identities. These may be referenced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // using /identity_name. For example the “spnego” identity may be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // referenced using “/spnego”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;spnego&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Details about this identity&#x27;s principal. This instance does not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // declare any value for configuration or local username. That is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // left up to the services and components use wish to reference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // this principal and set overrides for those values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;HTTP/_HOST@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot; : &quot;service&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Details about this identity’s keytab file. This keytab file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // will be created in the configured keytab file directory with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // read-only access granted to root and users in the cluster’s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // default user group (typically, hadoop). To ensure that only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // a single copy exists on the file system, references to this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // identity should not override the keytab file details;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // however if it is desired that multiple keytab files are</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // created, these values may be overridden in a reference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // within a service or component. Since no configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // specification is set, the the keytab file location will not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // be set in any configuration file by default. Services and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // components need to reference this identity to update this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // value as needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;file&quot;: &quot;${keytab_dir}/spnego.service.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;root&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;smokeuser&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Details about this identity&#x27;s principal. This instance declares</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // a configuration and local username mapping. Services and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // components can override this to set additional configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // that should be set to this principal value.  Overriding the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // local username may create undesired behavior since there may be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // conflicting entries in relevant auth-to-local rule sets.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;${cluster-env/smokeuser}@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot; : &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;configuration&quot;: &quot;cluster-env/smokeuser_principal_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;local_username&quot; : &quot;${cluster-env/smokeuser}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Details about this identity’s keytab file. This keytab file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // will be created in the configured keytab file directory with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // read-only access granted to the configured smoke user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // (typically ambari-qa) and users in the cluster’s default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // user group (typically hadoop). To ensure that only a single</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // copy exists on the file system, references to this identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // should not override the keytab file details; however if it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // is desired that multiple keytab files are created, these</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // values may be overridden in a reference within a service or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // component.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;file&quot;: &quot;${keytab_dir}/smokeuser.headless.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;${cluster-env/smokeuser}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;configuration&quot;: &quot;cluster-env/smokeuser_keytab&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-service-level-kerberos-descriptor">Example Service-level Kerberos Descriptor<a class="hash-link" href="#example-service-level-kerberos-descriptor" title="Direct link to heading">​</a></h4><p>The following example is annotated for descriptive purposes. The annotations are not valid in a real
JSON-formatted file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // One or more services may be listed in a service-level Kerberos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Descriptor file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;services&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;SERVICE_1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Service-level identities to be created if this service is installed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Any relevant keytab files will be distributed to hosts with at least</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // one of the components on it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Service-specific identity declaration, declaring all properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // needed initiate the creation of the principal and keytab files,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // as well as setting the service-specific  configurations.  This may</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // be referenced by contained components using ../service1_identity.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;service1_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;value&quot;: &quot;service1/_HOST@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;type&quot; : &quot;service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;configuration&quot;: &quot;service1-site/service1.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;file&quot;: &quot;${keytab_dir}/service1.service.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;${service1-env/service_user}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;configuration&quot;: &quot;service1-site/service1.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Service-level identity referencing the stack-level spnego</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // identity and overriding the principal and keytab configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // specifications.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;service1_spnego&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;reference&quot;: &quot;/spnego&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;configuration&quot;: &quot;service1-site/service1.web.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;configuration&quot;: &quot;service1-site/service1.web.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Service-level identity referencing the stack-level smokeuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // identity. No properties are being overridden and overriding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // the principal and keytab configuration specifications.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This ensures that the smokeuser principal is created and its</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // keytab file is distributed to all hosts where components of this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // this service are installed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;service1_smokeuser&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;reference&quot;: &quot;/smokeuser&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Properties related to this service that require the auth-to-local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // rules to be dynamically generated based on identities create for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // the cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;auth_to_local_properties&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;service1-site/security.auth_to_local&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Configuration properties to be set when this service is installed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // no matter which components are installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;configurations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;service-site&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;service1.security.authentication&quot;: &quot;kerberos&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;service1.security.auth_to_local&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // A list of components related to this service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;components&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;COMPONENT_1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // Component-specific identities to be created when this component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // is installed.  Any keytab files specified will be distributed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // only to the hosts where this component is installed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // An identity &quot;local&quot; to this component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;component1_service_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;value&quot;: &quot;component1/_HOST@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot; : &quot;service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.principal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;local_username&quot; : &quot;${service1-env/service_user}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;file&quot;: &quot;${keytab_dir}/s1c1.service.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;name&quot;: &quot;${service1-env/service_user}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;access&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // The stack-level spnego identity overridden to set component-specific</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;component1_spnego_1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;reference&quot;: &quot;/spnego&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.spnego.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.spnego.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // The stack-level spnego identity overridden to set a different set of component-specific</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;component1_spnego_2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;reference&quot;: &quot;/spnego&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.someother.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp1.someother.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // Component-specific configurations to set if this component is installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;configurations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;service-site&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;comp1.security.type&quot;: &quot;kerberos&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;COMPONENT_2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;identities&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;component2_service_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;value&quot;: &quot;component2/_HOST@${realm}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot; : &quot;service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp2.principal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;local_username&quot; : &quot;${service1-env/service_user}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;file&quot;: &quot;${keytab_dir}/s1c2.service.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;owner&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;name&quot;: &quot;${service1-env/service_user}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;access&quot;: &quot;r&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;group&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;name&quot;: &quot;${cluster-env/user_group}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;access&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp2.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // The service-level service1_identity identity overridden to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // set component-specific configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;component2_service1_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;reference&quot;: &quot;../service1_identity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp2.service.principal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;keytab&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;configuration&quot;: &quot;service1-site/comp2.service.keytab.file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;configurations&quot; : [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;service-site&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;comp2.security.type&quot;: &quot;kerberos&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.5/ambari-design/kerberos/kerberos_descriptor.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.7.5/kerberos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ambari Kerberos Automation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.7.5/ambari-design/kerberos/kerberos_service"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The Kerberos Service</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-kerberos-descriptor" class="table-of-contents__link toc-highlight">The Kerberos Descriptor</a><ul><li><a href="#components-of-a-kerberos-descriptor" class="table-of-contents__link toc-highlight">Components of a Kerberos Descriptor</a></li><li><a href="#descriptor-specifications" class="table-of-contents__link toc-highlight">Descriptor Specifications</a></li><li><a href="#examples-1" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Apache Ambari. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b0b3e18c.js"></script>
<script src="/assets/js/main.f3d6882e.js"></script>
</body>
</html>