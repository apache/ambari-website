<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.7.8 docs-doc-page docs-doc-id-ambari-design/metrics/configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Configuration | Apache Ambari</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/2.7.8/ambari-design/metrics/configuration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.7.8"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.7.8"><meta data-rh="true" name="docsearch:version" content="2.7.8"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.7.8"><meta data-rh="true" property="og:title" content="Configuration | Apache Ambari"><meta data-rh="true" name="description" content="Metrics Collector"><meta data-rh="true" property="og:description" content="Metrics Collector"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/2.7.8/ambari-design/metrics/configuration"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/2.7.8/ambari-design/metrics/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/2.7.8/ambari-design/metrics/configuration" hreflang="x-default"><meta http-equiv="Content-Security-Policy" content="default-src &#39;self&#39;; img-src &#39;self&#39; data: https://*.githubusercontent.com https://github.com; script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39;; style-src &#39;self&#39; &#39;unsafe-inline&#39;;"><link rel="stylesheet" href="/assets/css/styles.b0dee94f.css">
<script src="/assets/js/runtime~main.aa4534fc.js" defer="defer"></script>
<script src="/assets/js/main.b966d3cb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/ambari-logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ambari-logo.png" alt="Apache Ambari Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/ambari-logo.png" alt="Apache Ambari Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Apache Ambari</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/2.7.8/introduction">Docs</a><a href="https://cwiki.apache.org/confluence/display/AMBARI/Ambari" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Releases</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/dyn/closer.cgi/ambari/ambari-3.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.0.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/dyn/closer.cgi/ambari/ambari-2.7.9" target="_blank" rel="noopener noreferrer" class="dropdown__link">2.7.9<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/dyn/closer.cgi/ambari/ambari-2.7.8" target="_blank" rel="noopener noreferrer" class="dropdown__link">2.7.8<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Project Information</a><ul class="dropdown__menu"><li><a href="/team" class="dropdown__link" target="_blank">Project Team</a></li><li><a href="https://issues.apache.org/jira/projects/AMBARI/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">JIRA<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.meetup.com/Apache-Ambari-User-Group/" target="_blank" rel="noopener noreferrer" class="dropdown__link">User Group<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" title="Legal">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apachecon.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">ApacheCon Events<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy Policy<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/marks/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Trademarks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks our Sponsors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.7.8/ambari-design/metrics/configuration">2.7.8</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/ambari-design/metrics/configuration">Next</a></li><li><a class="dropdown__link" href="/docs/3.0.0/ambari-design/metrics/configuration">3.0.0</a></li><li><a class="dropdown__link" href="/docs/2.7.9/ambari-design/metrics/configuration">2.7.9</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.7.8/ambari-design/metrics/configuration">2.7.8</a></li></ul></div><a href="https://github.com/apache/ambari" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.8/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/2.7.8/quick-start/quick-start-guide">Quick Start</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/quick-start/quick-start-guide">Quick Start Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/quick-start/quick-start-for-new-vm-users">Quick Start for New VM Users</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/2.7.8/ambari-design/">Ambari Design</a><button aria-label="Collapse sidebar category &#x27;Ambari Design&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/alerts">Alerts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/2.7.8/kerberos">Automated Kerberizaton</a><button aria-label="Expand sidebar category &#x27;Automated Kerberizaton&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/2.7.8/blueprints">Blueprints</a><button aria-label="Expand sidebar category &#x27;Blueprints&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/enhanced-configs/">Enhanced Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/service-dashboard/">Enhanced Service Dashboard</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/">Metrics</a><button aria-label="Collapse sidebar category &#x27;Metrics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/metrics-collector-api-specification">Metrics Collector API Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/operations">Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/metrics-api-specification">Ambari Metrics API specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/stack-defined-metrics">Stack Defined Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/upgrading-ambari-metrics-system">Upgrading Ambari Metrics System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/ambari-server-metrics">Ambari Server Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/metrics/ambari-metrics-whitelisting">Ambari Metrics - Whitelisting</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/quick-links">Quick Links</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/2.7.8/ambari-design/stack-and-services/">Stacks and Services</a><button aria-label="Expand sidebar category &#x27;Stacks and Services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.8/ambari-design/technology-stack">Technology Stack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/2.7.8/ambari-design/views/">Views</a><button aria-label="Expand sidebar category &#x27;Views&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/2.7.8/ambari-dev/">Ambari Development</a><button aria-label="Expand sidebar category &#x27;Ambari Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/2.7.8/ambari-plugin-contribution/">Ambari Plugin Contributions</a><button aria-label="Expand sidebar category &#x27;Ambari Plugin Contributions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.8/ambari-alerts">Ambari Alerts</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Ambari<!-- --> <b>2.7.8</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/3.0.0/ambari-design/metrics/configuration">latest version</a></b> (<!-- -->3.0.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/2.7.8/ambari-design/"><span itemprop="name">Ambari Design</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/2.7.8/ambari-design/metrics/"><span itemprop="name">Metrics</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.7.8</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuration</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-collector">Metrics Collector<a href="#metrics-collector" class="hash-link" aria-label="Direct link to Metrics Collector" title="Direct link to Metrics Collector">​</a></h2>
<table><thead><tr><th>Configuration Type</th><th>File Path</th><th>Comment</th></tr></thead><tbody><tr><td>ams-site</td><td>/etc/ambari-metrics-collector/conf/ams-site.xml</td><td>Settings that control the API daemon and the aggregator threads.</td></tr><tr><td>ams-env</td><td>/etc/ambari-metrics-collector/conf/ams-env.sh</td><td>Memory / PATH settings for the API daemon</td></tr><tr><td>ams-hbase-site</td><td>/etc/ams-hbase/conf/hbase-site.xml<br>/etc/ambari-metrics-collector/conf/hbase-site.xml</td><td>Settings for the HBase storage used for the metrics data.</td></tr><tr><td>ams-hbase-env</td><td>/etc/ams-hbase/conf/hbase-env.sh</td><td>Memory / PATH settings for the HBase storage.<br><strong>Note</strong>: In embedded more, the heap memory setting for master and regionserver is summed up as total memory for single HBase daemon.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-monitor">Metrics Monitor<a href="#metrics-monitor" class="hash-link" aria-label="Direct link to Metrics Monitor" title="Direct link to Metrics Monitor">​</a></h2>
<table><thead><tr><th>Configuration Type</th><th>File Path</th><th>Comment</th></tr></thead><tbody><tr><td>ams-env</td><td>/etc/ambari-metrics-monitor/conf/ams-env.sh</td><td>Used for log and pid dir modifications, this is the same configuration as above, common to both components.</td></tr><tr><td>metric_groups</td><td>/etc/ambari-metrics-monitor/conf/metric_groups.conf</td><td>Not available in the UI. Used to control what <strong>HOST/SYSTEM</strong> metrics are reported.</td></tr><tr><td>metric_monitor</td><td>/etc/ambari-metrics-monitor/conf/metric_monitor.ini</td><td>Not available in the UI. Settings for the monitor daemon.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metric-collector---ams-site---configuration-details">Metric Collector - ams-site - Configuration details<a href="#metric-collector---ams-site---configuration-details" class="hash-link" aria-label="Direct link to Metric Collector - ams-site - Configuration details" title="Direct link to Metric Collector - ams-site - Configuration details">​</a></h2>
<ul>
<li>Modifying retention interval for time aggregated data. Refer to Aggregation section for more information on aggregation: API spec
(Note: In Ambari 2.0 and 2.1, the Phoenix version does not support Alter TTL queries. So these can be modified from the UI, only at install time. Please refer to Known Issues section for workaround.)</li>
</ul>
<table><thead><tr><th>Configuration Type</th><th>File Path</th><th>Comment</th></tr></thead><tbody><tr><td>timeline.metrics.host.aggregator.ttl</td><td>86400</td><td>1 minute resolution data purge interval. Default is 1 day.</td></tr><tr><td>timeline.metrics.host.aggregator.minute.ttl</td><td>604800</td><td>Host based X minutes resolution data purge interval. Default is 7 days.<br>(X = configurable interval, default interval is 2 minutes)</td></tr><tr><td>timeline.metrics.host.aggregator.hourly.ttl</td><td>2592000</td><td>Host based hourly resolution data purge interval. Default is 30 days.</td></tr><tr><td>timeline.metrics.host.aggregator.daily.ttl</td><td>31536000</td><td>Host based daily resolution data purge interval. Default is 1 year.</td></tr><tr><td>timeline.metrics.cluster.aggregator.minute.ttl</td><td>2592000</td><td>Cluster wide minute resolution data purge interval. Default is 30 days.</td></tr><tr><td>timeline.metrics.cluster.aggregator.hourly.ttl</td><td>31536000</td><td>Cluster wide hourly resolution data purge interval. Default is 1 year.</td></tr><tr><td>timeline.metrics.cluster.aggregator.daily.ttl</td><td>63072000</td><td>Cluster wide daily resolution data purge interval. Default is 2 years.</td></tr><tr><td><strong>Note</strong>: The precision table at 1 minute resolution stores raw precision data for 1 day, when user queries for past 1 hour of data, the AMS API returns raw precision data.</td><td></td><td></td></tr></tbody></table>
<ul>
<li>Modifying the aggregation intervals for HOST and CLUSTER aggregators.
On wake up the aggregator threads resume from (last run time + interval) as long as last run time is not too old.</li>
</ul>
<table><thead><tr><th>Property</th><th>Default Value Path</th><th>Description</th></tr></thead><tbody><tr><td>timeline.metrics.host.aggregator.minute.interval</td><td>120</td><td>Time in seconds to sleep for the minute resolution host based aggregator. Default resolution is 2 minutes.</td></tr><tr><td>timeline.metrics.host.aggregator.hourly.interval</td><td>3600</td><td>Time in seconds to sleep for the hourly resolution host based aggregator. Default resolution is 1 hour.</td></tr><tr><td>timeline.metrics.host.aggregator.daily.interval</td><td>86400</td><td>Time in seconds to sleep for the day resolution host based aggregator. Default resolution is 24 hours.</td></tr><tr><td>timeline.metrics.cluster.aggregator.minute.interval</td><td>120</td><td>Time in seconds to sleep for the minute resolution cluster wide aggregator. Default resolution is 2 minutes.</td></tr><tr><td>timeline.metrics.cluster.aggregator.hourly.interval</td><td>3600</td><td>Time in seconds to sleep for the hourly resolution cluster wide aggregator. Default is 1 hour.</td></tr><tr><td>timeline.metrics.cluster.aggregator.daily.interval</td><td>86400</td><td>Time in seconds to sleep for the day resolution cluster wide aggregator. Default is 24 hours.</td></tr></tbody></table>
<ul>
<li>Modifying checkpoint information. The aggregators store the timestamp or last run time on local FS.
After reading last run time, the aggregator thread decides to aggregate as long as the (currentTime - lastRunTime) &lt; multipler * aggregation_interval.
The multiplier is configurable for each aggregator.</li>
</ul>
<table><thead><tr><th>Property</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>timeline.metrics.host.aggregator.minute.checkpointCutOffMultiplier</td><td>2</td><td>Multiplier value * interval = Max allowed checkpoint lag. Effectively if aggregator checkpoint is greater than max allowed checkpoint delay,the checkpoint will be discarded by the aggregator.</td></tr><tr><td>timeline.metrics.host.aggregator.hourly.checkpointCutOffMultiplier</td><td>2</td><td>Same as above</td></tr><tr><td>timeline.metrics.host.aggregator.daily.checkpointCutOffMultiplier</td><td>1</td><td>Same as above</td></tr><tr><td>timeline.metrics.cluster.aggregator.minute.checkpointCutOffMultiplier</td><td>2</td><td>Same as above</td></tr><tr><td>timeline.metrics.cluster.aggregator.hourly.checkpointCutOffMultiplier</td><td>2</td><td>Same as above</td></tr><tr><td>timeline.metrics.cluster.aggregator.daily.checkpointCutOffMultiplier</td><td>1</td><td>Same as above</td></tr><tr><td>timeline.metrics.aggregator.checkpoint.dir</td><td>/var/lib/ambari-metrics-collector/checkpoint</td><td>Directory to store aggregator checkpoints. Change to a permanent location so that checkpoint are not lost.</td></tr></tbody></table>
<ul>
<li>Other important configuration properties</li>
</ul>
<table><thead><tr><th>Property</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>timeline.metrics.host.aggregator.*.disabled</td><td>false</td><td>Disable host based * aggregations. ( * =&gt; minute/hourly/daily)</td></tr><tr><td>timeline.metrics.cluster.aggregator.*.disabled</td><td>false</td><td>Disable cluster based * aggregations. ( * =&gt; minute/hourly/daily)</td></tr><tr><td>timeline.metrics.cluster.aggregator.minute.timeslice.interval</td><td>30</td><td>Lowest resolution of desired data for cluster level minute aggregates.</td></tr><tr><td>timeline.metrics.hbase.data.block.encoding</td><td>FAST_DIFF</td><td>Codecs are enabled on a table by setting the DATA_BLOCK_ENCODING property. Default encoding is FAST_DIFF. This can be changed only before creating tables.</td></tr><tr><td>timeline.metrics.hbase.compression.scheme</td><td>SNAPPY</td><td>Compression codes need to be installed and available before setting the scheme. Default compression is SNAPPY. Disable by setting to None. This can be changed only before creating tables.</td></tr><tr><td>timeline.metrics.service.default.result.limit</td><td>5760</td><td>Max result limit on number of rows returned. Calculated as follows: 4 aggregate metrics/min * 60 * 24: Retrieve aggregate data for 1 day.</td></tr><tr><td>timeline.metrics.service.checkpointDelay</td><td>60</td><td>Time in seconds to sleep on the first run or when the checkpoint is too old.</td></tr><tr><td>timeline.metrics.service.resultset.fetchSize</td><td>2000</td><td>JDBC resultset prefect size for aggregator queries.</td></tr><tr><td>timeline.metrics.service.cluster.aggregator.appIds</td><td>datanode,nodemanager,hbase</td><td>List of application ids to use for aggregating host level metrics for an application. Example: bytes_read across Yarn Nodemanagers.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-ambari-metrics-service-in-distributed-mode">Configuring Ambari Metrics service in distributed mode<a href="#configuring-ambari-metrics-service-in-distributed-mode" class="hash-link" aria-label="Direct link to Configuring Ambari Metrics service in distributed mode" title="Direct link to Configuring Ambari Metrics service in distributed mode">​</a></h2>
<p>In distributed mode, Metric Collector writes go to HDFS of the cluster. Currently distributed mode does not support multi-mode Metric Collector, however the plan is to allow Metric Collector to scale horizontally to allow a multi-node HBase storage layer.</p>
<p><strong>Note</strong>: Make sure there is a local Datanode hosted with the Collector, it provides AMS HBase the distinct advantage of write and reads sharded across the data volumes available to the DN.</p>
<p>Following steps need to be performed either at install time or after deploy to configure Metric Collector in distributed mode. Note: If configuring after install, the data will not be automatically copied over to HDFS.</p>
<ol>
<li>Edit ams-site, Set timeline.metrics.service.operation.mode = distributed</li>
<li>Edit ams-hbase-site,<!-- -->
<ul>
<li>Set hbase.rootdir = hdfs://namenode-host;:8020/user/ams/hbase [ If NN HA is enabled,     hdfs://nameservice-id/user/ams/hbase ]
(Note: /user/ams/hbase here is the directory where metric data will be stored in HDFS)</li>
<li>Set hbase.cluster.distributed = true</li>
<li>Add dfs.client.read.shortcircuit = true (This is an optimization with a local DN present)</li>
</ul>
</li>
<li>Restart Metrics Collector</li>
</ol>
<p><strong>Note</strong>: In Ambari 2.0.x, there is a bug in deploying AMS in distributed mode, if Namenode HA is enabled. Please follow the instruction listed in this JIRA as workaround steps: (<a href="https://issues.apache.org/jira/browse/AMBARI-10707" target="_blank" rel="noopener noreferrer">AMBARI-10707</a>)</p>
<p><strong>Note</strong>: In Ambari 2.2.1, stack advisor changes the dependent configs for distributed mode automatically through recommendations. Ideally, the only config that needs to be changed is timeline.metrics.service.operation.mode = distributed. The other configs - hbase.rootdir, hbase.cluster.distributed and dfs.client.read.shortcircuit will be changed automatically.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-data-from-embedded-to-distributed-mode">Migrating data from embedded to distributed mode<a href="#migrating-data-from-embedded-to-distributed-mode" class="hash-link" aria-label="Direct link to Migrating data from embedded to distributed mode" title="Direct link to Migrating data from embedded to distributed mode">​</a></h2>
<p>Steps to migrate existing metric data to HDFS and starting AMS in distributed mode:</p>
<ul>
<li>
<p>Stop AMS Metric Collector</p>
</li>
<li>
<p>Create hdfs directory for ams user, Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - hdfs </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hdfs dfs -mkdir /user/ams&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - hdfs </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hdfs dfs -chown ams:hadoop /user/ams&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Copy the metric data from the AMS local directory (existing value of hbase.rootdir in ams-hbase-site) to HDFS directory. Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /var/lib/ambari-metrics-collector/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - hdfs </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hdfs dfs -copyFromLocal hbase hdfs://    &lt;namnode-http-address&gt;:8020/user/ams/&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - hdfs </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hdfs dfs -chown -R ams:hadoop /user/ams/hbase&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the Metric Collector after making the changes needed for distributed mode.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-hbase-region-user-and-table-metrics">Enabling HBase Region, User and Table Metrics<a href="#enabling-hbase-region-user-and-table-metrics" class="hash-link" aria-label="Direct link to Enabling HBase Region, User and Table Metrics" title="Direct link to Enabling HBase Region, User and Table Metrics">​</a></h2>
<p>Ambari disables HBase metrics (per region, per user and per table) by default. HBase metrics can be numerous and can cause performance issues. HBase RegionServer metrics are available by default.</p>
<p>If you want HBase (per region, per user and per table) metrics to be collected by Ambari, you can do the following. It is <strong>highly recommended</strong> that you test turning on this option and confirm that your AMS performance is acceptable.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-guide">Step-by-step guide<a href="#step-by-step-guide" class="hash-link" aria-label="Direct link to Step-by-step guide" title="Direct link to Step-by-step guide">​</a></h3>
<ol>
<li>
<p>On the Ambari Server, browse to:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var/lib/ambari-server/resources/stacks/HDP/3.0/services/HBASE/     package/templates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>When Ambari is older than 2.7.0, on the Ambari Server, browse to:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var/lib/ambari-server/resources/common-services/HBASE/     </span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">/package/templates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Edit the following template files:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hadoop-metrics2-hbase.properties-GANGLIA-MASTER.j2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hadoop-metrics2-hbase.properties-GANGLIA-RS.j2 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Comment out (or remove) the following lines:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*.source.filter.class</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">org.apache.hadoop.metrics2.filter.     RegexFilter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hbase.*.source.filter.exclude</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">.*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Regions</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Users</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Tables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Save the template files and restart Ambari Server and then HBase for the changes to take effect.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you upgrade Ambari to a newer version, you will need to re-apply this change to the template file.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-hdfs-per-user-metrics">Enabling HDFS per-user Metrics<a href="#enabling-hdfs-per-user-metrics" class="hash-link" aria-label="Direct link to Enabling HDFS per-user Metrics" title="Direct link to Enabling HDFS per-user Metrics">​</a></h2>
<p>HDFS per-user Metrics aren&#x27;t emitted by default. Kindly exercise caution before enabling them and make sure to refer to the details of client and service port numbers.</p>
<p>To be able to use the HDFS - Users dashboard in your Grafana instance as well as to view metrics for HDFS per user, you will need to add these custom properties to your configuration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-guide-1">Step-by-step guide<a href="#step-by-step-guide-1" class="hash-link" aria-label="Direct link to Step-by-step guide" title="Direct link to Step-by-step guide">​</a></h3>
<p>In Ambari, HDFS &gt; Configs &gt; Advanced &gt;  Custom hdfs-site, Add the following properties.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dfs.namenode.servicerpc-address=&lt;namenodehost&gt;:8021</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.callqueue.impl=org.apache.hadoop.ipc.FairCallQueue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.backoff.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.scheduler.impl=org.apache.hadoop.ipc.DecayRpcScheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.scheduler.priority.levels=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.decay-scheduler.backoff.responsetime.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipc.8020.decay-scheduler.backoff.responsetime.thresholds=10,20,30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Things to Consider</strong>
client port : 8020 (if different, replace it with appropriate port in all keys)Things to consider:</p>
<ul>
<li>service port: 8021 (if different, replace it with appropriate port in first value)</li>
<li>namenodehost: needs to be a FQDN.
Once these properties are added, it should look like this.
<img decoding="async" loading="lazy" src="/assets/images/enabling-hdfs-user-metrics-42982ec96b46e9d429089590bec0fb01.png" title="Enabling Hdfs User Metrics" width="2002" height="998" class="img_ev3q"></li>
</ul>
<p><strong>Restart HDFS &amp; you should see the metrics being emitted. You should now also be able to use the HDFS - Users Dashboard in Grafana.</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.8/ambari-design/metrics/configuration.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.7.8/ambari-design/metrics/metrics-collector-api-specification"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Metrics Collector API Specification</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.7.8/ambari-design/metrics/operations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Operations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#metrics-collector" class="table-of-contents__link toc-highlight">Metrics Collector</a></li><li><a href="#metrics-monitor" class="table-of-contents__link toc-highlight">Metrics Monitor</a></li><li><a href="#metric-collector---ams-site---configuration-details" class="table-of-contents__link toc-highlight">Metric Collector - ams-site - Configuration details</a></li><li><a href="#configuring-ambari-metrics-service-in-distributed-mode" class="table-of-contents__link toc-highlight">Configuring Ambari Metrics service in distributed mode</a></li><li><a href="#migrating-data-from-embedded-to-distributed-mode" class="table-of-contents__link toc-highlight">Migrating data from embedded to distributed mode</a></li><li><a href="#enabling-hbase-region-user-and-table-metrics" class="table-of-contents__link toc-highlight">Enabling HBase Region, User and Table Metrics</a><ul><li><a href="#step-by-step-guide" class="table-of-contents__link toc-highlight">Step-by-step guide</a></li></ul></li><li><a href="#enabling-hdfs-per-user-metrics" class="table-of-contents__link toc-highlight">Enabling HDFS per-user Metrics</a><ul><li><a href="#step-by-step-guide-1" class="table-of-contents__link toc-highlight">Step-by-step guide</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2025 Apache Ambari. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>