"use strict";(self.webpackChunkambari_website=self.webpackChunkambari_website||[]).push([[7809],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var a=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=a.createContext({}),o=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=o(e.components);return a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,i=e.mdxType,n=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=o(r),d=i,h=u["".concat(c,".").concat(d)]||u[d]||m[d]||n;return r?a.createElement(h,s(s({ref:t},p),{},{components:r})):a.createElement(h,s({ref:t},p))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=r.length,s=new Array(n);s[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,s[1]=l;for(var o=2;o<n;o++)s[o]=r[o];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},4532:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>n,metadata:()=>l,toc:()=>o});var a=r(7462),i=(r(7294),r(3905));const n={title:"Ambari Metrics API specification"},s=void 0,l={unversionedId:"ambari-design/metrics/metrics-api-specification",id:"version-2.7.6/ambari-design/metrics/metrics-api-specification",title:"Ambari Metrics API specification",description:"The Ambari REST API supports metric queries at CLUSTER, HOST, COMPONENT and HOST COMPONENT levels.",source:"@site/versioned_docs/version-2.7.6/ambari-design/metrics/metrics-api-specification.md",sourceDirName:"ambari-design/metrics",slug:"/ambari-design/metrics/metrics-api-specification",permalink:"/docs/ambari-design/metrics/metrics-api-specification",draft:!1,editUrl:"https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.6/ambari-design/metrics/metrics-api-specification.md",tags:[],version:"2.7.6",frontMatter:{title:"Ambari Metrics API specification"},sidebar:"ambariSidebar",previous:{title:"Troubleshooting",permalink:"/docs/ambari-design/metrics/troubleshooting"},next:{title:"Stack Defined Metrics",permalink:"/docs/ambari-design/metrics/stack-defined-metrics"}},c={},o=[{value:"CLUSTER",id:"cluster",level:2},{value:"HOST",id:"host",level:2},{value:"COMPONENT",id:"component",level:2},{value:"HOST COMPONENT",id:"host-component",level:2}],p={toc:o};function m(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The Ambari REST API supports metric queries at CLUSTER, HOST, COMPONENT and HOST COMPONENT levels."),(0,i.kt)("p",null,"Broadly, the types of metrics queries supported are: ",(0,i.kt)("strong",{parentName:"p"},"time range")," or ",(0,i.kt)("strong",{parentName:"p"},"point in time"),"."),(0,i.kt)("p",null,"Following is an illustration of an API call that fetches metrics from the Metrics backend service using Ambari API."),(0,i.kt)("h2",{id:"cluster"},"CLUSTER"),(0,i.kt)("p",null,"E.g.: Dashboard metrics : Fetch load average across all nodes of a cluster"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"http://<ambari-server>:8080/api/v1/clusters/<cluster-name>?fields=metrics/load[1430844925,1430848525,15]&_=1430848532904\n")),(0,i.kt)("p",null,"The above API call retrieves the load average, aggregated across all hosts in the cluster."),(0,i.kt)("p",null,"The request part of the API call selects the cluster instance while the predicate includes the metric with the time range query, followed by current time in milliseconds."),(0,i.kt)("p",null,"Time range query:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"),(0,i.kt)("th",{parentName:"tr",align:null},"Comment"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Start time"),(0,i.kt)("td",{parentName:"tr",align:null},"1430844925"),(0,i.kt)("td",{parentName:"tr",align:null},"Start time for the time range. (Epoch)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"End time"),(0,i.kt)("td",{parentName:"tr",align:null},"1430848525"),(0,i.kt)("td",{parentName:"tr",align:null},"End time of the time range. (Epoch)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Step"),(0,i.kt)("td",{parentName:"tr",align:null},"15"),(0,i.kt)("td",{parentName:"tr",align:null},"Default step, this is used only for zero padding or null padding if the padding interval cannot be determined from the retrieved data.")))),(0,i.kt)("h2",{id:"host"},"HOST"),(0,i.kt)("p",null,"E.g.: Host metrics: Get the cpu utilization on a particular host in the cluster"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"http://<ambari-server>:8080/api/v1/clusters/<cluster-name>/hosts/<host-name>?fields=metrics/cpu/cpu_user[1430844610,1430848210,15],metrics/cpu/cpu_wio[1430844610,1430848210,15],metrics/cpu/cpu_nice[1430844610,1430848210,15],metrics/cpu/cpu_aidle[1430844610,1430848210,15],metrics/cpu/cpu_system[1430844610,1430848210,15],metrics/cpu/cpu_idle[1430844610,1430848210,15]&_=1430848217591\n")),(0,i.kt)("p",null,"The above API call retrieves all cpu related metrics required to chart out cpu utilization on a host page."),(0,i.kt)("p",null,"The request part of the above API call selects the host which is queried while the predicate part includes the metric names with time range query."),(0,i.kt)("h2",{id:"component"},"COMPONENT"),(0,i.kt)("p",null,"E.g.: Service metrics: Get the capacity utilization metrics aggregated across all datanodes but only the latest value (point in time)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"}," http://<ambari-server>:8080/api/v1/clusters/<cluster-name>/services/HDFS/components/DATANODE?fields=metrics/dfs/datanode/DfsUsed,metrics/dfs/datanode/Capacity&_=1430849798630\n")),(0,i.kt)("p",null,"The above API call retrieves two metrics values which represent the point in time metric value for the requested metrics obtained for the Metrics Service backend. (non JMX)"),(0,i.kt)("p",null,"For a call to get JMX metrics directly from a Hadoop daemon, use the metrics name that corresponds to the JMX MBean metric, example: metrics/dfs/FSNamesystem/CapacityUsedGB (Refer to Stack Defined Metrics for more info)"),(0,i.kt)("p",null,"The request part of the above API call selects the service from the cluster while predicate part includes the metrics names."),(0,i.kt)("h2",{id:"host-component"},"HOST COMPONENT"),(0,i.kt)("p",null,"E.g.: Daemon metrics: Get the heap memory usage for active Namenode"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"http://<ambari-server>:8080/api/v1/clusters/<cluster-name>/hosts/<host-name>/host_components/NAMENODE?fields=metrics/jvm/memHeapCommittedM[1430847303,1430850903,15],metrics/jvm/memHeapUsedM[1430847303,1430850903,15]&_=1430850903846\nThe above API call retrieves JVM heap metrics for the Active Namenode in the cluster.\n")),(0,i.kt)("p",null,"The request part of the api selects the Namenode host component while predicate part includes metrics with time range query."))}m.isMDXComponent=!0}}]);