"use strict";(self.webpackChunkambari_website=self.webpackChunkambari_website||[]).push([[284],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>d});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),k=p(a),d=n,u=k["".concat(s,".").concat(d)]||k[d]||c[d]||i;return a?r.createElement(u,o(o({ref:t},m),{},{components:a})):r.createElement(u,o({ref:t},m))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=k;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}k.displayName="MDXCreateElement"},2584:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const i={},o="Installation",l={unversionedId:"ambari-plugin-contribution/scom/installation",id:"version-2.7.6/ambari-plugin-contribution/scom/installation",title:"Installation",description:"Prerequisite Software",source:"@site/versioned_docs/version-2.7.6/ambari-plugin-contribution/scom/installation.md",sourceDirName:"ambari-plugin-contribution/scom",slug:"/ambari-plugin-contribution/scom/installation",permalink:"/docs/ambari-plugin-contribution/scom/installation",draft:!1,editUrl:"https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.6/ambari-plugin-contribution/scom/installation.md",tags:[],version:"2.7.6",frontMatter:{},sidebar:"ambariSidebar",previous:{title:"Ambari SCOM Management Pack",permalink:"/docs/ambari-plugin-contribution/scom/"},next:{title:"Step-by-step guide on adding a dashboard widget for a host.",permalink:"/docs/ambari-plugin-contribution/step-by-step"}},s={},p=[{value:"Prerequisite Software",id:"prerequisite-software",level:2},{value:"Package Contents",id:"package-contents",level:2},{value:"Ambari SCOM Server Installation",id:"ambari-scom-server-installation",level:2},{value:"Manual Installation",id:"manual-installation",level:2},{value:"Configuring SQL Server",id:"configuring-sql-server",level:3},{value:"Configuring Hadoop Metrics Sink",id:"configuring-hadoop-metrics-sink",level:3},{value:"Preparing the Metrics Sink",id:"preparing-the-metrics-sink",level:4},{value:"Setup Hadoop Metrics2 Interface",id:"setup-hadoop-metrics2-interface",level:4},{value:"Verify Metrics Collection",id:"verify-metrics-collection",level:4},{value:"Installing and Configuring Ambari SCOM Server",id:"installing-and-configuring-ambari-scom-server",level:3},{value:"Running the Server",id:"running-the-server",level:4},{value:"Verify the Server API",id:"verify-the-server-api",level:4},{value:"MSI Installation",id:"msi-installation",level:2},{value:"Configuring SQL Server",id:"configuring-sql-server-1",level:3},{value:"Running the MSI Installer",id:"running-the-msi-installer",level:3},{value:"Installing Ambari SCOM Management Pack",id:"installing-ambari-scom-management-pack",level:3},{value:"Import the Management Pack",id:"import-the-management-pack",level:4},{value:"Create Run As Account",id:"create-run-as-account",level:4},{value:"Configure the Management Pack",id:"configure-the-management-pack",level:4},{value:"Best Practice: Create Management Pack for Customizations",id:"best-practice-create-management-pack-for-customizations",level:4},{value:"Monitoring Scenarios",id:"monitoring-scenarios",level:2}],m={toc:p};function c(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,r.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"installation"},"Installation"),(0,n.kt)("h2",{id:"prerequisite-software"},"Prerequisite Software"),(0,n.kt)("p",null,"Setting up Ambari SCOM assumes the following prerequisite software:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ambari SCOM 1.0",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Apache Hadoop 1.x cluster (HDFS and MapReduce) 1"))),(0,n.kt)("li",{parentName:"ul"},"Ambari SCOM 2.0",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Apache Hadoop 2.x cluster (HDFS and YARN/MapReduce) 2"))),(0,n.kt)("li",{parentName:"ul"},"JDK 1.7"),(0,n.kt)("li",{parentName:"ul"},"Microsoft SQL Server 2012"),(0,n.kt)("li",{parentName:"ul"},"Microsoft JDBC Driver 4.0 for SQL Server 3"),(0,n.kt)("li",{parentName:"ul"},"Microsoft System Center Operations Manager (SCOM) 2012 SP1 or later"),(0,n.kt)("li",{parentName:"ul"},"System Center Monitoring Agent installed on ",(0,n.kt)("strong",{parentName:"li"},"Watcher Node")," 4")),(0,n.kt)("p",null,"1 ",(0,n.kt)("em",{parentName:"p"},"Ambari SCOM")," 1.0 has been tested with a Hadoop cluster based on ",(0,n.kt)("strong",{parentName:"p"},"Hortonworks Data Platform 1.3 for Windows"),' ("',(0,n.kt)("a",{parentName:"p",href:"http://hortonworks.com/products/releases/hdp-1-3-for-windows/"},"HDP 1.3 for Windows"),'")'),(0,n.kt)("p",null,"2 ",(0,n.kt)("em",{parentName:"p"},"Ambari SCOM")," 2.0 has been tested with a Hadoop cluster based on ",(0,n.kt)("strong",{parentName:"p"},"Hortonworks Data Platform 2.1 for Windows"),' ("',(0,n.kt)("a",{parentName:"p",href:"http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1-Win-latest/bk_installing_hdp_for_windows/content/win-getting-ready.html"},"HDP 2.1 for Windows"),'")'),(0,n.kt)("p",null,"3 Obtain the ",(0,n.kt)("em",{parentName:"p"},"Microsoft JDBC Driver 4.0 for SQL Server")," JAR file (",(0,n.kt)("inlineCode",{parentName:"p"},"sqljdbc4.jar"),") at ",(0,n.kt)("a",{parentName:"p",href:"http://technet.microsoft.com/en-us/library/ms378749.aspx"},"http://technet.microsoft.com/en-us/library/ms378749.aspx")),(0,n.kt)("p",null,"4 See Microsoft TechNet topic for ",(0,n.kt)("a",{parentName:"p",href:"http://technet.microsoft.com/en-us/library/hh212772.aspx"},"Managing Discovery and Agents"),". Minimum Agent requirements ",(0,n.kt)("em",{parentName:"p"},".NET 4")," and ",(0,n.kt)("em",{parentName:"p"},"PowerShell 2.0 + 3.0")),(0,n.kt)("h2",{id:"package-contents"},"Package Contents"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"\u251c\u2500 ambari-scom- _**version**_.zip\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 server.zip\n\u251c\u2500\u2500 metrics-sink.zip\n\u251c\u2500\u2500 mp.zip\n\u2514\u2500\u2500 ambari-scom.msi\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"File"),(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"server.zip"),(0,n.kt)("td",{parentName:"tr",align:null},"Server Package"),(0,n.kt)("td",{parentName:"tr",align:null},"Contains the required software for configuring the Ambari SCOM Server software.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"metrics-sink.zip"),(0,n.kt)("td",{parentName:"tr",align:null},"Metrics Sink Package"),(0,n.kt)("td",{parentName:"tr",align:null},"Contains the required software for manually configuring SQL Server and the Hadoop Metrics Sink.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-scom.msi"),(0,n.kt)("td",{parentName:"tr",align:null},"MSI Installer"),(0,n.kt)("td",{parentName:"tr",align:null},"The Ambari SCOM MSI Installer for configuring the Ambari SCOM Server and Hadoop Metrics Sink")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"mp.zip"),(0,n.kt)("td",{parentName:"tr",align:null},"Management Pack Package"),(0,n.kt)("td",{parentName:"tr",align:null},"Contains the Ambari SCOM Management Pack software.")))),(0,n.kt)("h2",{id:"ambari-scom-server-installation"},"Ambari SCOM Server Installation"),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"The ",(0,n.kt)("strong",{parentName:"p"},"Ambari SCOM Management Pack")," must connect to an Ambari SCOM Server to retrieve cluster metrics. Therefore, you need to have an Ambari SCOM Server running in your cluster. If you have already installed your Hadoop cluster (including the Ganglia Service) with Ambari (minimum ",(0,n.kt)("strong",{parentName:"p"},"Ambari 1.5.1 for SCOM 2.0.0"),") and have an Ambari Server already running + managing your Hadoop 1.x cluster, you can use that Ambari Server and point the ",(0,n.kt)("strong",{parentName:"p"},"Management Pack")," that host. You can proceed directly to ",(0,n.kt)("a",{parentName:"p",href:"#id-2installation-mgmtpack"},"Installing Ambari SCOM Management Pack")," and skip these steps to install an Ambari SCOM Server. If you do not have an Ambari Server running + managing your cluster, you ",(0,n.kt)("strong",{parentName:"p"},"must")," install an Ambari SCOM Server using one of the methods described below.")),(0,n.kt)("p",null,"The following methods are available for installing Ambari SCOM Server:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Manual Installation")," - This installation method requires you to configure the SQL Server database, setup the Ambari SCOM Server and configure the Hadoop Metrics Sink. This provides the most flexible install option based on your environment."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"MSI Installation")," - This installation method installs the Ambari SCOM Server and configures the Hadoop Metrics Sink on all hosts in the cluster automatically using an MSI Installer. After launching the MSI, you provide information about your SQL Server database and the cluster for the installer to handle configuration. ")),(0,n.kt)("h2",{id:"manual-installation"},"Manual Installation"),(0,n.kt)("h3",{id:"configuring-sql-server"},"Configuring SQL Server"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Configure an existing SQL Server instance for "mixed mode" authentication.')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Confirm SQL Server is installed with TCP/IP active and enabled. (default port: 1433)")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a user and password. Remember this user and password as this will be the account used by the Hadoop metrics interface for capturing metrics. (default user: sa)")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"metrics-sink.zip")," package to obtain the DDL script.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create the Ambari SCOM database schema by running the ",(0,n.kt)("inlineCode",{parentName:"p"},"Hadoop-Metrics-SQLServer-CREATE.ddl")," script."))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},'The Hadoop Metrics DDL script will create a database called "HadoopMetrics".')),(0,n.kt)("h3",{id:"configuring-hadoop-metrics-sink"},"Configuring Hadoop Metrics Sink"),(0,n.kt)("h4",{id:"preparing-the-metrics-sink"},"Preparing the Metrics Sink"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"metrics-sink.zip")," package to obtain the ",(0,n.kt)("inlineCode",{parentName:"p"},"metrics-sink-<strong><em>version</em></strong>.jar")," file.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Obtain the ",(0,n.kt)("em",{parentName:"p"},"Microsoft JDBC Driver 4.0 for SQL Server")," ",(0,n.kt)("inlineCode",{parentName:"p"},"sqljdbc4.jar")," file.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy ",(0,n.kt)("inlineCode",{parentName:"p"},"sqljdbc4.jar")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"metrics-sink-version.jar")," to each host in the cluster. For example, copy to ",(0,n.kt)("inlineCode",{parentName:"p"},"C:\\Ambari\\metrics-sink-version.jar")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"C:\\Ambari\\sqljdbc4.jar"),"\non each host."))),(0,n.kt)("h4",{id:"setup-hadoop-metrics2-interface"},"Setup Hadoop Metrics2 Interface"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"On each host in the cluster, setup the Hadoop metrics2 interface to use the ",(0,n.kt)("inlineCode",{parentName:"li"},"SQLServerSink"),".")),(0,n.kt)("p",null,"Edit the ",(0,n.kt)("inlineCode",{parentName:"p"},"hadoop-metrics2.properties")," file (located in the ",(0,n.kt)("inlineCode",{parentName:"p"},"<strong><em>{C:\\hadoop\\install\\dir}</em></strong>\\bin")," folder of each host in the cluster):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"*.sink.sql.class=org.apache.hadoop.metrics2.sink.SqlServerSink\n\nnamenode.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\ndatanode.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\njobtracker.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\ntasktracker.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\nmaptask.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\nreducetask.sink.sql.databaseUrl=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("em",{parentName:"p"},"Where:")),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"server = the SQL Server hostname")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"port = the SQL Server port (for example, 1433)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"user = the SQL Server user (for example, sa)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"password = the SQL Server password (for example, BigData1)")))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Update the Java classpath for each Hadoop service to include the ",(0,n.kt)("inlineCode",{parentName:"li"},"metrics-sink-<strong><em>version</em></strong>.jar")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"sqljdbc4.jar")," files.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"- Example: Updating the Java classpath for _HDP for Windows_ clusters\n\n  The `service.xml` files will be located in the `C:\\hadoop\\install\\dir\\bin` folder of each host in the cluster. The Java classpath is specified for each service in the `<arguments>` element of the `service.xml` file. For example, to update the Java classpath for the `NameNode` component, edit the `C:\\hadoop\\bin\\namenode.xml` file.\n\n    ```\n    ...\n    \n    ... -classpath ...;C:\\Ambari\\metrics-sink-1.5.1.2.0.0.0-673.jar;C:\\Ambari\\sqljdbc4.jar ...\n    \n    ...\n    \n    ```\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Restart Hadoop for these changes to take affect.")),(0,n.kt)("h4",{id:"verify-metrics-collection"},"Verify Metrics Collection"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Confirm metrics are being captured in the SQL Server database by querying the ",(0,n.kt)("inlineCode",{parentName:"li"},"MetricRecord")," table:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"select * from HadoopMetrics.dbo.MetricRecord\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In the above SQL statement, ",(0,n.kt)("inlineCode",{parentName:"p"},"HadoopMetrics")," is the database name.")),(0,n.kt)("h3",{id:"installing-and-configuring-ambari-scom-server"},"Installing and Configuring Ambari SCOM Server"),(0,n.kt)("h4",{id:"running-the-server"},"Running the Server"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Designate a machine in the cluster to run the Ambari SCOM Server.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"server.zip")," package to obtain the Ambari SCOM Server packages."))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 ambari-scom-server- **_version_**-conf.zip\n\u251c\u2500\u2500 ambari-scom-server- **_version_**-lib.zip\n\u2514\u2500\u2500 ambari-scom-server- **_version_**.jar\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari-scom-server-version-lib.zip")," package to obtain the Ambari SCOM dependencies.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari-scom-server-version-conf.zip")," package to obtain the Ambari SCOM configuration files.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From the configuration files, edit the ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari.properties")," file:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"scom.sink.db.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver\nscom.sink.db.url=jdbc:sqlserver://[server]:[port];databaseName=HadoopMetrics;user=[user];password=[password]\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("em",{parentName:"p"},"Where:")),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"server = the SQL Server hostname")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"port = the SQL Server port (for example, 1433)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"user = the SQL Server user (for example, sa)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"password = the SQL Server password (for example, BigData1)")))),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},"Run the ",(0,n.kt)("inlineCode",{parentName:"li"},"org.apache.ambari.scom.AmbariServer")," class from the Java command line to start the Ambari SCOM Server. ")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Be sure to include the following in the classpath:"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ambari-scom-server-version.jar")," file"),(0,n.kt)("li",{parentName:"ul"},"configuration folder containing the Ambari SCOM configuration files"),(0,n.kt)("li",{parentName:"ul"},"lib folder containing the Ambari SCOM dependencies"),(0,n.kt)("li",{parentName:"ul"},"folder containing the ",(0,n.kt)("inlineCode",{parentName:"li"},"clusterproperties.txt")," file from the Hadoop install. For example, ",(0,n.kt)("inlineCode",{parentName:"li"},"c:\\hadoop\\install\\dir")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"sqljdbc4.jar")," SQLServer JDBC Driver file\n::\n")),(0,n.kt)("p",{parentName:"admonition"},"For example:"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'java -server -XX:NewRatio=3 -XX:+UseConcMarkSweepGC -XX:-UseGCOverheadLimit -XX:CMSInitiatingOccupancyFraction=60 -Xms512m -Xmx2048m -cp "c:\\ambari-scom\\server\\conf;c:\\ambari-scom\\server\\lib\\*;c:\\jdbc\\sqljdbc4.jar;c:\\hadoop\\install\\dir;c:\\ambari-scom\\server\\ambari-scom-server-1.5.1.2.0.0.0-673.jar" org.apache.ambari.scom.AmbariServer\n'))),(0,n.kt)("p",null,"In the above command, be sure to replace the Ambari SCOM version in the ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari-scom-server-version.jar")," and replace ",(0,n.kt)("inlineCode",{parentName:"p"},"c:\\hadoop\\install\\dir")," with the folder containing the ",(0,n.kt)("inlineCode",{parentName:"p"},"clusterproperties.txt")," file.\n:::"),(0,n.kt)("h4",{id:"verify-the-server-api"},"Verify the Server API"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"From a browser access the API")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"http://[ambari-scom-server]:8080/api/v1/clusters\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Verify that metrics are being reported.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"http://[ambari-scom-server]:8080/api/v1/clusters/ambari/services/HDFS/components/NAMENODE\n")),(0,n.kt)("h2",{id:"msi-installation"},"MSI Installation"),(0,n.kt)("h3",{id:"configuring-sql-server-1"},"Configuring SQL Server"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Configure an existing SQL Server instance for "mixed mode" authentication.')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Confirm SQL Server is installed with TCP/IP active and enabled. (default port: 1433)")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a user and password. (default user: sa)"))),(0,n.kt)("h3",{id:"running-the-msi-installer"},"Running the MSI Installer"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Designate a machine in the cluster to run the Ambari SCOM Server.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"server.zip")," package to obtain the Ambari SCOM Server packages.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari-scom.msi"),' installer. The "Ambari SCOM Setup" dialog appears:'),(0,n.kt)("p",{parentName:"li"}," ",(0,n.kt)("img",{src:a(8830).Z,width:"394",height:"346"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Provide the following information: "))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Field"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Ambari SCOM package directory"),(0,n.kt)("td",{parentName:"tr",align:null},"The directory where the installer will place the Ambari SCOM Server packages. For example: C:\\Ambari")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SQL Server hostname"),(0,n.kt)("td",{parentName:"tr",align:null},"The hostname of the SQL Server instance for Ambari SCOM Server to use to store Hadoop metrics.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SQL Server port"),(0,n.kt)("td",{parentName:"tr",align:null},"The port of the SQL Server instance.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SQL Server login"),(0,n.kt)("td",{parentName:"tr",align:null},"The login username.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SQL Server password"),(0,n.kt)("td",{parentName:"tr",align:null},"The login password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Path to SQL Server JDBC Driver (sqljdbc4.jar)"),(0,n.kt)("td",{parentName:"tr",align:null},"The path to the JDBC Driver JAR file.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Path to the cluster layout file (clusterproperties.txt)"),(0,n.kt)("td",{parentName:"tr",align:null},"The path to the cluster layout properties file.")))),(0,n.kt)("ol",{start:5},(0,n.kt)("li",{parentName:"ol"},"You can optionally select to Start Services"),(0,n.kt)("li",{parentName:"ol"},"Click Install"),(0,n.kt)("li",{parentName:"ol"},'After completion, links are created on the desktop to "Start Ambari SCOM Server", "Browse Ambari API" and "Browse Ambari API Metrics". After starting the Ambari SCOM Server, browse the API and Metrics to confirm the server is working properly.')),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The MSI installer installation log can be found at ",(0,n.kt)("inlineCode",{parentName:"p"},"C:\\AmbariInstallFiles\\AmbariSetupTools\\ambari.winpkg.install.log"))),(0,n.kt)("h3",{id:"installing-ambari-scom-management-pack"},"Installing Ambari SCOM Management Pack"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Before installing the Management pack, be sure to install the Ambari SCOM Server using the Ambari SCOM Server Installation instructions.")),(0,n.kt)("h4",{id:"import-the-management-pack"},"Import the Management Pack"),(0,n.kt)("p",null,"Perform the following to import the Ambari SCOM Management Pack into System Center Operations Manager."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the contents of the ",(0,n.kt)("inlineCode",{parentName:"p"},"mp.zip")," package to obtain the Ambari SCOM management pack (",(0,n.kt)("inlineCode",{parentName:"p"},".mpb"),") files.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ensure Windows Server 2012 running SCOM with SQL Server (full text search).")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open System Center Operations Manager.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to Administration -> Management Packs.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From the Tasks panel, select Import Management Packs...")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In the Import Management Packs dialog, select Add -> Add from disk...")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'You are prompted to search the Online Catalog. Click "No".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Browse for the Ambari SCOM management pack files.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the following files:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"Ambari.SCOM.Monitoring.mpb\nAmbari.SCOM.Management.mpb\nAmbari.SCOM.Presentation.mpb\n")),(0,n.kt)("ol",{start:10},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Click "Open"')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Review the Import list and click "Install".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Ambari SCOM Management Pack installation will start."))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The Ambari SCOM package also includes ",(0,n.kt)("inlineCode",{parentName:"p"},"AmbariSCOMManagementPack.msi")," which is an alternative packaging of the ",(0,n.kt)("inlineCode",{parentName:"p"},"mp.zip"),". This MSI is being made in ",(0,n.kt)("strong",{parentName:"p"},"beta")," form in this release.")),(0,n.kt)("h4",{id:"create-run-as-account"},"Create Run As Account"),(0,n.kt)("p",null,"Perform the following to configure a account to use when the Ambari SCOM Management Pack talks to the Ambari SCOM Server."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"After Importing the Management Pack is complete, go to Administration -> Run As Configuration -> Accounts.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'In the Tasks panel, select "Create Run as Account..."')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"You are presented with the Create Run As Account Wizard.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Go thru the wizard, select Run As account type "Basic Authentication".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Give the account a Display name and click "Next".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Enter the account name and password for the Ambari SCOM Server. This account will be used to connect to the Ambari SCOM Server to access the Ambari REST API. Default is account name is "admin" and password is "admin".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Click "Next"')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Select the "Less secure" distribution security option.')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Click "Next" and complete the wizard.'))),(0,n.kt)("h4",{id:"configure-the-management-pack"},"Configure the Management Pack"),(0,n.kt)("p",null,"Perform the following to configure the Ambari SCOM Management Pack to talk to the Ambari SCOM Server."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to Authoring -> Management Pack Templates -> Ambari SCOM")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'In the Tasks panel, select "Add Monitoring Wizard".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Select monitoring type "Ambari SCOM"')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Provide a name and select the destination management pack.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Provide the Ambari URI with is the address of the Ambari SCOM Server in the format:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"http://[ambari-scom-server]:8080/api/\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In the above Ambari URI, ",(0,n.kt)("inlineCode",{parentName:"p"},"ambari-scom-server")," is the Ambari SCOM Server.")),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the Run As Account that you created in Create Run As Account.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},'Select "Watcher Node". If node is not listed, click "Add" and browse for the node. Click "Next".')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Complete the Add Monitoring Wizard and proceed to the Monitoring Scenariosfor information on using the management pack."))),(0,n.kt)("h4",{id:"best-practice-create-management-pack-for-customizations"},"Best Practice: Create Management Pack for Customizations"),(0,n.kt)("p",null,"By default, Operations Manager saves all customizations such as overrides to the ",(0,n.kt)("strong",{parentName:"p"},"Default Management Pack"),". As a best practice, you should instead create a separate management pack for each sealed management pack you want to customize."),(0,n.kt)("p",null,"When you create a management pack for the purpose of storing customized settings for a sealed management pack, it is helpful to base the name of the new management pack on the name of the management pack that it is customizing, such as ",(0,n.kt)("strong",{parentName:"p"},"Ambari SCOM Customizations"),"."),(0,n.kt)("p",null,"Creating a new management pack for storing customizations of each sealed management pack makes it easier to export the customizations from a test environment to a production environment. It also makes it easier to delete a management pack, because you must delete any dependencies before you can delete a management pack. If customizations for all management packs are saved in the ",(0,n.kt)("strong",{parentName:"p"},"Default Management Pack")," and you need to delete a single management pack, you must first delete the ",(0,n.kt)("strong",{parentName:"p"},"Default Management Pack"),", which also deletes customizations to other management packs."),(0,n.kt)("h2",{id:"monitoring-scenarios"},"Monitoring Scenarios"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://cwiki.apache.org/confluence/display/AMBARI/3.+Monitoring+Scenarios"},"Monitoring Scenarios")))}c.isMDXComponent=!0},8830:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/ambari-scom-msi2-25a46ff2687e33c9c9b91d2e0a6cbe62.png"}}]);