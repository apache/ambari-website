"use strict";(self.webpackChunkambari_website=self.webpackChunkambari_website||[]).push([[7235],{22400:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/fmwk-events-0bcf04d6ba67e7b7990cd743d9f72cc3.jpg"},23326:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/view-events-629e0ac413767d75fe29d4aa1a3c40ff.jpg"},24289:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"ambari-design/views/framework-services","title":"Framework Services","description":"This section describes the framework services that are available for views.","source":"@site/versioned_docs/version-2.7.8/ambari-design/views/framework-services.md","sourceDirName":"ambari-design/views","slug":"/ambari-design/views/framework-services","permalink":"/docs/2.7.8/ambari-design/views/framework-services","draft":false,"unlisted":false,"editUrl":"https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.8/ambari-design/views/framework-services.md","tags":[],"version":"2.7.8","frontMatter":{},"sidebar":"ambariSidebar","previous":{"title":"Views","permalink":"/docs/2.7.8/ambari-design/views/"},"next":{"title":"View API","permalink":"/docs/2.7.8/ambari-design/views/view-api"}}');var a=i(74848),r=i(28453);const s={},o="Framework Services",c={},h=[{value:"ViewContext",id:"viewcontext",level:2},{value:"Instance Data",id:"instance-data",level:2},{value:"Instance Configuration Properties",id:"instance-configuration-properties",level:2},{value:"Events",id:"events",level:2},{value:"Framework Events",id:"framework-events",level:3},{value:"Views Events",id:"views-events",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"framework-services",children:"Framework Services"})}),"\n",(0,a.jsx)(t.p,{children:"This section describes the framework services that are available for views."}),"\n",(0,a.jsx)(t.h2,{id:"viewcontext",children:"ViewContext"}),"\n",(0,a.jsxs)(t.p,{children:["The view server-side resources have access to a ",(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/ViewContext.java",children:"ViewContext"})," object. The view context provides information about the current authenticated user, the view definition, the instance configuration properties, instance data and the view controller."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"/**\n   * The view context.\n\n   */\n  @Inject\n  ViewContext context;\n"})}),"\n",(0,a.jsx)(t.h2,{id:"instance-data",children:"Instance Data"}),"\n",(0,a.jsxs)(t.p,{children:['The view framework exposes a way to store key/value pair "instance data". This data is scoped to a given view instance and user. Instance data is meant to be used for information such as "user prefs" or other lightweight information that supports the experience of your view application. You can access the instance data get and put methods from the ',(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/ViewContext.java",children:"ViewContext"})," object."]}),"\n",(0,a.jsxs)(t.p,{children:["Checkout the ",(0,a.jsx)(t.strong,{children:"Favorite View"})," for example usage of the instance data API."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/tree/trunk/ambari-views/examples/favorite-view",children:"https://github.com/apache/ambari/tree/trunk/ambari-views/examples/favorite-view"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"/**\n * Context object available to the view components to provide access to\n * the view and instance attributes as well as run time information about\n * the current execution context.\n\n */\npublic interface ViewContext {\n\n\xa0/**\n   * Save an instance data value for the given key.\n\n   *\n   * @param key    the key\n   * @param value  the value\n   *\n   * @throws IllegalStateException if no instance is associated\n   */\n  public void putInstanceData(String key, String value);\n  /**\n   * Get the instance data value for the given key.\n\n   *\n   * @param key  the key\n   *\n   * @return the instance data value; null if no instance is associated\n   */\n  public String getInstanceData(String key);\n\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"instance-configuration-properties",children:"Instance Configuration Properties"}),"\n",(0,a.jsx)(t.p,{children:"The instance configuration properties (set when you created your view instance) are accessible from the view context:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"viewContext.getProperties();\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Configuration properties also supports a set of pre-defined ",(0,a.jsx)(t.strong,{children:"variables"}),' that will be replaced when you read the property from the view context. For example, if your view requires a configuration parameter "hdfs.file.path" and that path is going to be set based on the username, when you configure the view instance, set the configuration property like so:']}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'"hdfs.file.path" : "/this/is/some/path/${username}"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["When you get this property from the view context, the ",(0,a.jsx)(t.code,{children:"${username}"})," variable will be replaced automatically."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'viewContext.getProperties().get("hdfs.file.path") returns "/this/is/some/path/pramod"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Instance parameters support the following pre-defined variables: ",(0,a.jsx)(t.code,{children:"${username}"}),", ",(0,a.jsx)(t.code,{children:"${viewName}"})," and ",(0,a.jsx)(t.code,{children:"${instanceName}"})]}),"\n",(0,a.jsx)(t.h2,{id:"events",children:"Events"}),"\n",(0,a.jsx)(t.p,{children:'Events are an important component of the views framework. Events allow the view to interact with the framework on lifecycle changes (i.e. "Framework Events") such as deploy, create and destroy. As well, once a user has collection of views available, eventing allows the views to communicate with other views (i.e. "View Events").'}),"\n",(0,a.jsx)(t.h3,{id:"framework-events",children:"Framework Events"}),"\n",(0,a.jsxs)(t.p,{children:["To register to receive framework events, in the ",(0,a.jsx)(t.code,{children:"view.xml"}),", specify a ",(0,a.jsx)(t.code,{children:"<view-class>this.is.my.view-clazz</view-class>"})," which is a class that implements the ",(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/View.java",children:"View"})," interface."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:i(22400).A+"",title:"Apache Ambari &gt; Framework Services &gt; fmwk-events.jpg",width:"345",height:"240"})}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Event"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"onDeploy()"}),(0,a.jsx)(t.td,{children:"Called when a view is deployed."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"onCreate()"}),(0,a.jsx)(t.td,{children:"Called when a view instance is created."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"onDestroy()"}),(0,a.jsx)(t.td,{children:"Called when a view instance is destroy."})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"views-events",children:"Views Events"}),"\n",(0,a.jsxs)(t.p,{children:["Views can pass events between views. Obtain the ",(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/ViewController.java",children:"ViewController"})," object that allows you to ",(0,a.jsx)(t.strong,{children:"register listeners"})," for view events and to ",(0,a.jsx)(t.strong,{children:"fire events"})," for other listeners. A view can register an event ",(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/events/Listener.java",children:"Listener"})," (via the ",(0,a.jsx)(t.a,{href:"https://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/ViewController.java",children:"ViewController"}),") for other views by ",(0,a.jsx)(t.strong,{children:"view name"}),", or by ",(0,a.jsx)(t.strong,{children:"view name + version"}),". When an ",(0,a.jsx)(t.a,{href:"http://github.com/apache/ambari/blob/trunk/ambari-views/src/main/java/org/apache/ambari/view/events/Event.java",children:"Event"})," is fired from the source view, all registered listeners will receive the event."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:i(23326).A+"",title:"Apache Ambari &gt; Framework Services &gt; view-events.jpg",width:"424",height:"203"})}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Obtain the view controller and register a listener."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"viewContext.getViewController().registerListener(...);\n"})}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Fire the event. ",(0,a.jsx)(t.code,{children:"viewContext.getViewController().fireEvent(...);"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The framework will notify all registered listeners. The listener implementation can process the event as appropriate.  ",(0,a.jsx)(t.code,{children:"listener.notify(...)"})]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>o});var n=i(96540);const a={},r=n.createContext(a);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);