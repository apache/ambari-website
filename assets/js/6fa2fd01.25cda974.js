"use strict";(self.webpackChunkambari_website=self.webpackChunkambari_website||[]).push([[1553],{28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>t});var a=n(96540);const r={},l=a.createContext(r);function s(e){const i=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(l.Provider,{value:i},e.children)}},90436:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"ambari-dev/building-from-source","title":"Building from Source","description":"This guide explains how to build Apache Ambari 3.0 and its related subprojects from source code.","source":"@site/docs/ambari-dev/building-from-source.md","sourceDirName":"ambari-dev","slug":"/ambari-dev/building-from-source","permalink":"/docs/next/ambari-dev/building-from-source","draft":false,"unlisted":false,"editUrl":"https://github.com/vivostar/vivostar.github.io/tree/master/docs/ambari-dev/building-from-source.md","tags":[],"version":"current","frontMatter":{"title":"Building from Source"},"sidebar":"ambariSidebar","previous":{"title":"Ambari Development","permalink":"/docs/next/ambari-dev/"},"next":{"title":"Running Tests","permalink":"/docs/next/ambari-dev/running-tests"}}');var r=n(74848),l=n(28453);const s={title:"Building from Source"},t="Building Apache Ambari from Source",d={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"System Requirements",id:"system-requirements",level:3},{value:"Java Requirements",id:"java-requirements",level:3},{value:"Additional Packages",id:"additional-packages",level:3},{value:"Building Ambari Main Project",id:"building-ambari-main-project",level:2},{value:"1. Clone the Repository",id:"1-clone-the-repository",level:3},{value:"2. Build Options",id:"2-build-options",level:3},{value:"Build Without RPM",id:"build-without-rpm",level:4},{value:"Build With RPM",id:"build-with-rpm",level:4},{value:"Building Ambari Metrics",id:"building-ambari-metrics",level:2},{value:"1. Clone the Repository",id:"1-clone-the-repository-1",level:3},{value:"2. Build Options",id:"2-build-options-1",level:3},{value:"Build Without RPM",id:"build-without-rpm-1",level:4},{value:"Build With RPM",id:"build-with-rpm-1",level:4},{value:"Building Ambari Infra",id:"building-ambari-infra",level:2},{value:"1. Clone the Repository",id:"1-clone-the-repository-2",level:3},{value:"2. Build RPM Package",id:"2-build-rpm-package",level:3}];function c(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"building-apache-ambari-from-source",children:"Building Apache Ambari from Source"})}),"\n",(0,r.jsx)(i.p,{children:"This guide explains how to build Apache Ambari 3.0 and its related subprojects from source code."}),"\n",(0,r.jsx)(i.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(i.p,{children:"Before you begin, ensure you have the following requirements installed:"}),"\n",(0,r.jsx)(i.h3,{id:"system-requirements",children:"System Requirements"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Operating System: Rocky Linux 8 or 9 (recommended)"}),"\n",(0,r.jsxs)(i.li,{children:["Python 3 Development Tools (",(0,r.jsx)(i.code,{children:"python3-devel"}),")"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"java-requirements",children:"Java Requirements"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Ambari Main Project: JDK 17"}),"\n",(0,r.jsx)(i.li,{children:"Ambari Metrics: JDK 8"}),"\n",(0,r.jsx)(i.li,{children:"Ambari Infra: JDK 8"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"additional-packages",children:"Additional Packages"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"snappy-devel"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"building-ambari-main-project",children:"Building Ambari Main Project"}),"\n",(0,r.jsx)(i.h3,{id:"1-clone-the-repository",children:"1. Clone the Repository"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git clone git@github.com:apache/ambari.git\ncd ambari\n"})}),"\n",(0,r.jsx)(i.h3,{id:"2-build-options",children:"2. Build Options"}),"\n",(0,r.jsx)(i.h4,{id:"build-without-rpm",children:"Build Without RPM"}),"\n",(0,r.jsx)(i.p,{children:"To build Ambari without creating RPM packages:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"mvn -B -T 2C clean install package \\\n    -Drat.skip=true \\\n    -DskipTests \\\n    -Dmaven.test.skip=true \\\n    -Dfindbugs.skip=true \\\n    -Dcheckstyle.skip=true\n"})}),"\n",(0,r.jsx)(i.h4,{id:"build-with-rpm",children:"Build With RPM"}),"\n",(0,r.jsx)(i.p,{children:"To build Ambari and create RPM packages:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"mvn -B -T 2C clean install package rpm:rpm \\\n    -Drat.skip=true \\\n    -DskipTests \\\n    -Dmaven.test.skip=true \\\n    -Dfindbugs.skip=true \\\n    -Dcheckstyle.skip=true\n"})}),"\n",(0,r.jsx)(i.p,{children:"The RPM packages will be generated at:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Ambari Agent: ",(0,r.jsx)(i.code,{children:"ambari/ambari-agent/target/rpm/ambari-agent/RPMS/x86_64/ambari-agent-3.0.0.0-SNAPSHOT.x86_64.rpm"})]}),"\n",(0,r.jsxs)(i.li,{children:["Ambari Server: ",(0,r.jsx)(i.code,{children:"ambari/ambari-server/target/rpm/ambari-server/RPMS/x86_64/ambari-server-3.0.0.0-SNAPSHOT.x86_64.rpm"})]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"building-ambari-metrics",children:"Building Ambari Metrics"}),"\n",(0,r.jsxs)(i.admonition,{title:"Performance Optimization",type:"tip",children:[(0,r.jsx)(i.p,{children:"To significantly improve build performance, download binary dependencies locally before building:"}),(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Create a local directory for dependencies:"}),"\n"]}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"mkdir -p /ws/dl/\n"})}),(0,r.jsxs)(i.ol,{start:"2",children:["\n",(0,r.jsx)(i.li,{children:"Download the required binary files:"}),"\n"]}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"wget -P /ws/dl/ http://repo.bigtop.apache.org.s3.amazonaws.com/bigtop-stack-binary/3.2.0/centos-7/x86_64/hbase-2.4.13-bin.tar.gz\nwget -P /ws/dl/ http://repo.bigtop.apache.org.s3.amazonaws.com/bigtop-stack-binary/3.2.0/centos-7/x86_64/hadoop-3.3.4.tar.gz\nwget -P /ws/dl/ https://dl.grafana.com/oss/release/grafana-11.1.4.linux-amd64.tar.gz\nwget -P /ws/dl/ http://repo.bigtop.apache.org.s3.amazonaws.com/bigtop-stack-binary/3.2.0/centos-7/x86_64/phoenix-hbase-2.4-5.1.2-bin.tar.gz\n"})}),(0,r.jsxs)(i.ol,{start:"3",children:["\n",(0,r.jsxs)(i.li,{children:["Modify the ",(0,r.jsx)(i.code,{children:"pom.xml"})," in ambari-metrics project to use local files:"]}),"\n"]}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-xml",children:"\x3c!-- Update these properties to use local files --\x3e\n<properties>\n    <hbase.tar>file:///ws/dl/hbase-2.4.13-bin.tar.gz</hbase.tar>\n    <hadoop.tar>file:///ws/dl/hadoop-3.3.4.tar.gz</hadoop.tar>\n    <grafana.tar>file:///ws/dl/grafana-11.1.4.linux-amd64.tar.gz</grafana.tar>\n    <phoenix.tar>file:///ws/dl/phoenix-hbase-2.4-5.1.2-bin.tar.gz</phoenix.tar>\n</properties>\n"})}),(0,r.jsx)(i.p,{children:"This optimization will save significant time during repeated builds by avoiding large downloads."})]}),"\n",(0,r.jsx)(i.h3,{id:"1-clone-the-repository-1",children:"1. Clone the Repository"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git clone git@github.com:apache/ambari-metrics.git\ncd ambari-metrics\n"})}),"\n",(0,r.jsx)(i.h3,{id:"2-build-options-1",children:"2. Build Options"}),"\n",(0,r.jsx)(i.h4,{id:"build-without-rpm-1",children:"Build Without RPM"}),"\n",(0,r.jsx)(i.p,{children:"To build Ambari Metrics without creating RPM packages:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"mvn -T 2C clean install -DskipTests\n"})}),"\n",(0,r.jsx)(i.h4,{id:"build-with-rpm-1",children:"Build With RPM"}),"\n",(0,r.jsx)(i.p,{children:"To build Ambari Metrics and create RPM packages:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"mvn -T 2C clean install -DskipTests -Dbuild-rpm\n"})}),"\n",(0,r.jsx)(i.p,{children:"To locate the generated RPM packages:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:'find ./ -name "*.rpm"\n'})}),"\n",(0,r.jsx)(i.h2,{id:"building-ambari-infra",children:"Building Ambari Infra"}),"\n",(0,r.jsx)(i.h3,{id:"1-clone-the-repository-2",children:"1. Clone the Repository"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git clone git@github.com:apache/ambari-infra.git\ncd ambari-infra\n"})}),"\n",(0,r.jsx)(i.h3,{id:"2-build-rpm-package",children:"2. Build RPM Package"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"make rpm\n"})})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);