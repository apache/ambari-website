"use strict";(self.webpackChunkambari_website=self.webpackChunkambari_website||[]).push([[2161],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),m=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=m(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=m(a),u=n,b=c["".concat(s,".").concat(u)]||c[u]||d[u]||i;return a?r.createElement(b,l(l({ref:t},p),{},{components:a})):r.createElement(b,l({ref:t},p))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var m=2;m<i;m++)l[m]=a[m];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},8010:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>m});var r=a(7462),n=(a(7294),a(3905));const i={},l="Ambari Code Layout",o={unversionedId:"ambari-dev/ambari-code-layout",id:"version-2.7.5/ambari-dev/ambari-code-layout",title:"Ambari Code Layout",description:"Ambari code checkout and build instructions are available in Ambari Development page.",source:"@site/versioned_docs/version-2.7.5/ambari-dev/ambari-code-layout.md",sourceDirName:"ambari-dev",slug:"/ambari-dev/ambari-code-layout",permalink:"/docs/2.7.5/ambari-dev/ambari-code-layout",draft:!1,editUrl:"https://github.com/vivostar/vivostar.github.io/tree/master/versioned_docs/version-2.7.5/ambari-dev/ambari-code-layout.md",tags:[],version:"2.7.5",frontMatter:{},sidebar:"ambariSidebar",previous:{title:"Development Process for New Major Features",permalink:"/docs/2.7.5/ambari-dev/development-process-for-new-major-features"},next:{title:"Apache Ambari JIRA",permalink:"/docs/2.7.5/ambari-dev/apache-ambari-jira"}},s={},m=[{value:"Ambari-Server",id:"ambari-server",level:2},{value:"Ambari-Agent",id:"ambari-agent",level:2},{value:"Ambari-Views",id:"ambari-views",level:2},{value:"Ambari-Web",id:"ambari-web",level:2}],p={toc:m};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"ambari-code-layout"},"Ambari Code Layout"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Ambari code checkout and build instructions are available in Ambari Development page."),"\n",(0,n.kt)("em",{parentName:"p"},"Ambari design and architecture is detailed in ",(0,n.kt)("a",{parentName:"em",href:"/docs/2.7.5/ambari-design/"},"Ambari Design")," page."),"\n",(0,n.kt)("em",{parentName:"p"},"Understanding the architecture of Ambari is helpful in navigating code easily.")),(0,n.kt)("p",null,"Ambari's source has the following layout"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"ambari/\n   ambari-agent/\n   ambari-common/\n   ambari-project/\n   ambari-server/\n   ambari-views/\n   ambari-web/\n   contrib/\n   docs/\n")),(0,n.kt)("p",null,"Major components of Ambari reside in their own sub-folders under the root folder, to maintain clean separation of code."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Folder"),(0,n.kt)("th",{parentName:"tr",align:null},"Components or Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-server"),(0,n.kt)("td",{parentName:"tr",align:null},"Code for the main Ambari server which manages Hadoop through the agents installed on each node.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-agent"),(0,n.kt)("td",{parentName:"tr",align:null},"Code for the Ambari agents which run on each node that the server above manages.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-web"),(0,n.kt)("td",{parentName:"tr",align:null},"Code for Ambari Web UI which interacts with the Ambari server above.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-views"),(0,n.kt)("td",{parentName:"tr",align:null},"Code for Ambari Views, the framework for extending the Ambari Web UI.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ambari-common"),(0,n.kt)("td",{parentName:"tr",align:null},"Any common code between Ambari Server and Agents.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"contrib"),(0,n.kt)("td",{parentName:"tr",align:null},"Code for any custom contributions Ambari makes to other third party software or libraries.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"docs"),(0,n.kt)("td",{parentName:"tr",align:null},"Basic Ambari documentation, including the Ambari REST API.")))),(0,n.kt)("p",null,"Ambari Server and Agents interact with each other via an internal JSON protocol.\nAmbari Web UI interacts with Ambari Server through the documented Ambari REST APIs."),(0,n.kt)("h2",{id:"ambari-server"},"Ambari-Server"),(0,n.kt)("h2",{id:"ambari-agent"},"Ambari-Agent"),(0,n.kt)("h2",{id:"ambari-views"},"Ambari-Views"),(0,n.kt)("h2",{id:"ambari-web"},"Ambari-Web"),(0,n.kt)("p",null,"The Ambari Web UI is a purely browser side JavaScript application based on the ",(0,n.kt)("a",{parentName:"p",href:"http://emberjs.com/"},"Ember")," JavaScript framework. A good understanding of ",(0,n.kt)("a",{parentName:"p",href:"http://emberjs.com/"},"Ember"),"  is necessary to easily understand the code and its layout."),(0,n.kt)("p",null,"Being a pure JavaScript application, all UI is rendered locally in browser; with data coming from the Ambari REST APIs provided by the Ambari Server."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"ambari-web/\n   app/\n   config.coffee\n   package.json\n   pom.xml\n   test/\n   vendor/\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Folder"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"app/"),(0,n.kt)("td",{parentName:"tr",align:null},"The main application code. This contains Ember's views, templates, controllers, models, routes, etc. for rendering Ambari UI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"config.coffee"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"http://brunch.io/"},"Brunch")," application builder configuration file")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"package.json"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://npmjs.org/"},"npm")," package manager configuration file")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"test/"),(0,n.kt)("td",{parentName:"tr",align:null},"Javascript test files testing functionality written in app/ folder")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vendor/"),(0,n.kt)("td",{parentName:"tr",align:null},"Third party javascript libraries and stylesheets used. Full list of third party libraries is documented in /ambari/ambari-web/app/assets/licenses/NOTICE.txt")))),(0,n.kt)("p",null,"Developers mainly work on javascript and other files in the app/ folder. Once that is done, the final javascript is built using Brunch (a HTML5 application assembler based on node.js) into the /ambari/ambari-web/public/ folder. This folder contains the index.html which bootstraps the Ambari web application."),(0,n.kt)("p",null,"Developers while working should use the"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"brunch w\n")),(0,n.kt)("p",null,"command to launch Brunch in watch mode where it re-generates the final application on any change. Similarly"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"brunch watch --server (or use the shorthand: brunch w -s)\n")),(0,n.kt)("p",null,"launches a HTTP server at http://localhost:3333 serving the final application. This is helpful in seeing UI with mock data, without the entire Ambari server deployed."),(0,n.kt)("p",null,'Note: see "',(0,n.kt)("a",{parentName:"p",href:"/docs/2.7.5/ambari-dev/coding-guidelines-for-ambari"},"Coding Guidelines for Ambari"),'" for more details on building and running Ambari Web locally.'),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"ambari-web/app")),(0,n.kt)("p",null,"Since ambari-web/app/ folder is where developers spend a majority of time, the major files and their purpose is listed below."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Folder or File"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"assets/"),(0,n.kt)("td",{parentName:"tr",align:null},"Mock data under assets/data. Static files given from server via assets/font, assets/img.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"controllers/"),(0,n.kt)("td",{parentName:"tr",align:null},"The C in MVC. Ember controllers for the main application controllers/main, installer controllers/wizard, and common controllers controllers/global")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"data/"),(0,n.kt)("td",{parentName:"tr",align:null},"Meta data for the application (UI metadata, server data metadata, etc.)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"mappers/"),(0,n.kt)("td",{parentName:"tr",align:null},"Classes which map server side JSON data structures into client side Ember models.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"models/"),(0,n.kt)("td",{parentName:"tr",align:null},"The M in MVC. ",(0,n.kt)("a",{parentName:"td",href:"http://emberjs.com/guides/models/"},"Ember Data")," models used. Clusters, Services, Hosts, Alerts, etc. models are defined here")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"routes/"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"http://emberjs.com/guides/routing/"},"Ember routes")," defining the various page redirections in the application. main.js contains the main application routes. installer.js contains installer routes. Others are routings in various wizards etc.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"styles/"),(0,n.kt)("td",{parentName:"tr",align:null},"CSS stylesheets represented in the ",(0,n.kt)("a",{parentName:"td",href:"http://lesscss.org/"},"less")," format. This is compiled by Brunch into the ambari-web/public/stylesheets/app.css")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"views/"),(0,n.kt)("td",{parentName:"tr",align:null},"The V in MVC. Contains all the Ember views of the application. Main application views under views/main, installer views under views/installer, and common views under views/commons")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"templates/"),(0,n.kt)("td",{parentName:"tr",align:null},"The HTML templates used by the views above. Generally a view will have a template file. Sometimes views define the template content in themselves as strings")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"app.js"),(0,n.kt)("td",{parentName:"tr",align:null},"The main Ember application")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"config.js"),(0,n.kt)("td",{parentName:"tr",align:null},"Main configuration file for the javascript application. Developer can keep application in test mode using the App.testMode property etc.")))),(0,n.kt)("p",null,"If a developer adds, removes, or renames a model, view, controller, template, route, they should update the corresponding entry in models.js, views.js, controllers.js, templates.js, routes.js files."))}d.isMDXComponent=!0}}]);